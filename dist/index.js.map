{"version":3,"sources":["index.js","../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["document","addEventListener","months","weekday","today","Date","currentMonth","getMonth","currentYear","getFullYear","currentDay","getDate","monthAndYear","getElementById","once","status","view","selected_day","visible","update_event_id","settings","blob","events","navigator","serviceWorker","register","then","reg","console","log","scope","catch","error","getManifest","callback","mozApps","self","getSelf","onsuccess","result","onerror","manifest","a","origin","t","installOrigin","querySelector","src","style","display","find_closest_date","search_term","search","getTime","i","length","item","dateStart","querySelectorAll","focus","event_check","date","feedback","event","subscription","multidayevent","rrule","b","dateEnd","c","isSubscription","rrule_check","undefined","rrule_","getDay","tt","pp","slider","slider_index","event_check_day","k","innerHTML","elements","getAttribute","d","push","insertAdjacentHTML","opacity","slider_navigation","p","forEach","classList","remove","add","jump_to_today","showCalendar","activeElement","next","previous","prototype","getWeek","setHours","setDate","week1","Math","round","month","year","helper","bottom_bar","firstDay","daysInMonth","tbl","row","createElement","j","cell","cellText","createTextNode","appendChild","span","moon","setAttribute","mmonth","slice","day","getMoonPhase","toISOString","week","weekText","set_tabindex","renderHello","arr","sort_array","template","rendered","Mustache","render","data","index","n","m","contains","innerText","registration","systemMessageManager","subscribe","rv","clear_form","Array","from","e","value","add_edit_event","list_view","options","option_button_bar","setTimeout","pages","router","hasAttribute","edit_event","default_notification","articles","success","rect","getBoundingClientRect","elY","top","body","height","parentNode","scrollBy","left","window","innerHeight","behavior","eximport","list_ics","list_subscriptions","subscriptions","name","lp","load_subscriptions","lenght","fetch_ics","url","toaster","callback_scan","store_subscription","validate","val","localforage","setItem","err","delete_subscription","updated_subscriptions","filter","getItem","handleVisibilityChange","visibilityState","nav","move","nodeName","type","currentIndex","tabIndex","items","firstElementChild","targetElement","selected_day_id","id","parentElement","l","add_alarm","message_text","ready","foo","event_id","request","b2g","alarmManager","mozAlarms","remove_alarm","getAll","alarm","req","test_alarm","respectTimezone","JSON","stringify","convert_ics_date","nn","replace","export_data","store_event","start_time","end_time","convert_dt_start","convert_dt_end","notification_time","calc_notification","setMinutes","getMinutes","rrule_convert","r","UID","uid","SUMMARY","LOCATION","DESCRIPTION","CLASS","DTSTAMP","DTSTART","DTEND","RRULE","time_start","time_end","alarmTrigger","ATTACH","BEGIN","ACTION","END","without_subscription","export_ical","update_event","delete_event","f","person","y","import_event","set_datetime_form","d_h","getHours","d_m","d_h_","d_m_","pick_image_callback","resultBlob","URL","createObjectURL","fr","FileReader","onload","readAsDataURL","longpress","longpress_timespan","timeout","repeat_action","param","key","longpress_action","close","shortpress_action","toggle","qr","start_scan","children","pick_image","loadICS","tagName","views","handleKeyDown","evt","preventDefault","repeat","handleKeyUp","clearTimeout","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","onclose","removeErrorOverlay","message","stack","overlay","createErrorOverlay","stackTrace","getParents","modules","parents","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"index.js","sourceRoot":"../application","sourcesContent":["\"use strict\";\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  let months = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n\n  let weekday = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\n  let today = new Date();\n  let currentMonth = today.getMonth();\n  let currentYear = today.getFullYear();\n  let currentDay = today.getDate();\n  let monthAndYear = document.getElementById(\"monthAndYear\");\n\n  let once = false;\n\n  let status = {\n    view: \"month\",\n    selected_day: \"\",\n    visible: false,\n    update_event_id: \"\",\n  };\n\n  let settings = {};\n\n  let blob = \"\";\n  let events = [];\n\n  //ads || ads free\n  navigator.serviceWorker\n    .register(\"service-worker.js\")\n    .then((reg) => {\n      // registration worked\n      console.log(\"Registration succeeded. Scope is \" + reg.scope);\n    })\n    .catch((error) => {\n      // registration failed\n      console.log(\"Registration failed with \" + error);\n    });\n\n  //KaioOs ads\n  let getManifest = function (callback) {\n    if (!navigator.mozApps) {\n      return false;\n    }\n    let self = navigator.mozApps.getSelf();\n    self.onsuccess = function () {\n      callback(self.result);\n    };\n    self.onerror = function () {};\n  };\n\n  let self;\n  //KaiOs store true||false\n  function manifest(a) {\n    self = a.origin;\n    let t = document.getElementById(\"KaiOsAds-Wrapper\");\n    if (a.installOrigin == \"app://kaios-plus.kaiostech.com\") {\n      document.querySelector(\"#KaiOsAds-Wrapper iframe\").src = \"ads.html\";\n    } else {\n      console.log(\"Ads free\");\n      t.style.display = \"none\";\n    }\n  }\n\n  getManifest(manifest);\n\n  // ////////\n  // finde closest event to selected date in list view\n  // ////////\n\n  let find_closest_date = function (search_term) {\n    let t = 0;\n    let search = new Date(search_term).getTime();\n\n    for (let i = 0; i < events.length; i++) {\n      let item = new Date(events[i].dateStart).getTime();\n\n      if (search < item) {\n        t = events[i - 1].dateStart;\n        i = events.length;\n      }\n      //after last event\n      //focus last event\n      if (search > new Date(events[events.length - 1].dateStart).getTime()) {\n        t = events[events.length - 1].dateStart;\n        i = events.length;\n      }\n    }\n    document\n      .querySelectorAll(\"div#list-view article[data-date='\" + t + \"']\")[0]\n      .focus();\n    return t;\n  };\n\n  // check if has event\n  let event_check = function (date) {\n    let feedback = {\n      date: \"\",\n      event: false,\n      subscription: false,\n      multidayevent: false,\n      rrule: \"none\",\n    };\n\n    for (let t = 0; t < events.length; t++) {\n      if (typeof events[t] === \"object\") {\n        feedback.event = false;\n        feedback.subscription = false;\n        feedback.multidayevent = false;\n        feedback.rrule = false;\n        feedback.date = date;\n\n        let a = new Date(events[t].dateStart).getTime();\n        let b = new Date(events[t].dateEnd).getTime();\n        let c = new Date(date).getTime();\n\n        // multi day event\n        if (events[t][\"rrule_\"] == \"none\") {\n          if (a === c || b === c || (a < c && b > c)) {\n            feedback.event = true;\n            if (events[t].isSubscription === true) {\n              feedback.subscription = true;\n            }\n\n            if (events[t].multidayevent === true) {\n              feedback.multidayevent = true;\n            }\n            t = events.length;\n          }\n        }\n      }\n    }\n    return feedback;\n  };\n\n  // check if has event\n  let rrule_check = function (date) {\n    let feedback = {\n      date: \"\",\n      event: false,\n      subscription: false,\n      multidayevent: false,\n      rrule: \"none\",\n    };\n\n    for (let t = 0; t < events.length; t++) {\n      if (typeof events[t] === \"object\") {\n        feedback.event = false;\n        feedback.subscription = false;\n        feedback.multidayevent = false;\n        feedback.rrule = false;\n        feedback.date = date;\n\n        let a = new Date(events[t].dateStart).getTime();\n        let b = new Date(events[t].dateEnd).getTime();\n        let c = new Date(date).getTime();\n\n        //recurrences\n\n        if (\n          typeof events[t][\"rrule_\"] !== \"undefined\" &&\n          events[t][\"rrule_\"] !== undefined\n        ) {\n          if (\n            new Date(events[t].dateStart).getTime() <=\n              new Date(date).getTime() &&\n            new Date(date).getTime() <= new Date(events[t].dateEnd).getTime()\n          ) {\n            if (events[t].rrule_ == \"MONTHLY\") {\n              if (\n                new Date(events[t].dateStart).getDate() ===\n                new Date(date).getDate()\n              ) {\n                feedback.rrule = true;\n                t = events.length;\n                return feedback;\n              }\n            }\n\n            if (events[t][\"rrule_\"] == \"DAILY\") {\n              feedback.rrule = true;\n              t = events.length;\n              return feedback;\n            }\n\n            if (events[t].rrule_ == \"WEEKLY\") {\n              if (\n                new Date(events[t].dateStart).getDay() ===\n                new Date(date).getDay()\n              ) {\n                feedback.rrule = true;\n                t = events.length;\n                return feedback;\n              }\n            }\n\n            if (events[t].rrule_ == \"YEARLY\") {\n              let tt = new Date(events[t].dateStart);\n              let pp = new Date(date);\n\n              if (\n                tt.getDate() + \"-\" + tt.getMonth() ===\n                pp.getDate() + \"-\" + pp.getMonth()\n              ) {\n                feedback.rrule = true;\n                t = events.length;\n                return feedback;\n              }\n            }\n          }\n        }\n      }\n    }\n    return feedback;\n  };\n\n  //////////////////\n  //event slider\n  ///////////\n\n  let slider = [];\n  let slider_index = 0;\n\n  let event_check_day = function (date) {\n    slider = [];\n    let k = document.querySelector(\"div#event-slider-indicator div\");\n    k.innerHTML = \"\";\n\n    var elements = document.querySelectorAll(\"div#event-slider article\");\n    for (var i = 0; i < elements.length; i++) {\n      elements[i].style.display = \"none\";\n    }\n\n    let item = document.querySelectorAll(\"div#event-slider article\");\n\n    for (let i = 0; i < item.length; i++) {\n      let a = new Date(item[i].getAttribute(\"data-date\")).getTime();\n      let b = new Date(item[i].getAttribute(\"data-date-end\")).getTime();\n      let c = new Date(date).getTime();\n      let d = item[i].getAttribute(\"data-rrule\");\n\n      if (d === \"none\" || d === \"\") {\n        if (a === c || b === c || (a < c && b > c)) {\n          slider.push(item[i]);\n          slider[0].style.display = \"block\";\n\n          k.insertAdjacentHTML(\"beforeend\", \"<div class='indicator'></div>\");\n        }\n      } else {\n        if (a === c || b === c || (a < c && b > c && d)) {\n          //recurrences\n          //YEAR\n          if (d == \"YEARLY\") {\n            let tt = new Date(item[i].getAttribute(\"data-date\"));\n            let pp = new Date(date);\n\n            if (\n              tt.getDate() + \"-\" + tt.getMonth() ===\n              pp.getDate() + \"-\" + pp.getMonth()\n            ) {\n              slider.push(item[i]);\n              slider[0].style.display = \"block\";\n\n              k.insertAdjacentHTML(\n                \"beforeend\",\n                \"<div class='indicator'></div>\"\n              );\n            }\n          }\n\n          //WEEK\n          if (d == \"WEEKLY\") {\n            if (\n              new Date(item[i].getAttribute(\"data-date\")).getDay() ==\n              new Date(date).getDay()\n            ) {\n              slider.push(item[i]);\n              slider[0].style.display = \"block\";\n\n              k.insertAdjacentHTML(\n                \"beforeend\",\n                \"<div class='indicator'></div>\"\n              );\n            }\n          }\n\n          //MONTH\n\n          if (d == \"MONTHLY\") {\n            if (\n              new Date(item[i].getAttribute(\"data-date\")).getDate() ==\n              new Date(date).getDate()\n            ) {\n              slider.push(item[i]);\n              slider[0].style.display = \"block\";\n\n              k.insertAdjacentHTML(\n                \"beforeend\",\n                \"<div class='indicator'></div>\"\n              );\n            }\n          }\n\n          if (d == \"DAILY\") {\n            if (a === c || b === c || (a < c && b > c)) {\n              slider.push(item[i]);\n              slider[0].style.display = \"block\";\n\n              k.insertAdjacentHTML(\n                \"beforeend\",\n                \"<div class='indicator'></div>\"\n              );\n            }\n          }\n        }\n      }\n    }\n    if (slider != \"\" && slider.length > 0) {\n      k.style.opacity = 100;\n    } else {\n      k.style.opacity = 0;\n    }\n  };\n\n  let slider_navigation = function () {\n    let p = document.querySelectorAll(\"div#event-slider-indicator div div\");\n    if (slider_index == slider.length - 1) {\n      slider_index = -1;\n    }\n    slider_index++;\n    slider.forEach(function (item) {\n      item.style.display = \"none\";\n    });\n    slider[slider_index].style.display = \"block\";\n    p.forEach(function (item) {\n      item.classList.remove(\"active\");\n    });\n    p[slider_index].classList.add(\"active\");\n  };\n\n  ////\n  // JUMP TO TODAY\n  ////\n\n  let jump_to_today = function () {\n    let currentMonth = today.getMonth();\n    let currentYear = today.getFullYear();\n    showCalendar(currentMonth, currentYear);\n    console.log(currentMonth);\n\n    event_check_day(status.selected_day);\n    status.selected_day = document.activeElement.getAttribute(\"data-date\");\n  };\n\n  function next() {\n    currentYear = currentMonth === 11 ? currentYear + 1 : currentYear;\n    currentMonth = (currentMonth + 1) % 12;\n    showCalendar(currentMonth, currentYear);\n    event_check_day(status.selected_day);\n  }\n\n  function previous() {\n    currentYear = currentMonth === 0 ? currentYear - 1 : currentYear;\n    currentMonth = currentMonth === 0 ? 11 : currentMonth - 1;\n    showCalendar(currentMonth, currentYear);\n    event_check_day(status.selected_day);\n  }\n\n  //////////////\n  //BUILD CALENDAR\n  //////////////\n\n  // get weeknumber\n  Date.prototype.getWeek = function () {\n    var date = new Date(this.getTime());\n    date.setHours(0, 0, 0, 0);\n\n    // Thursday in current week decides the year.\n    date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7));\n\n    // January 4 is always in week 1.\n    var week1 = new Date(date.getFullYear(), 0, 4);\n\n    // Adjust to Thursday in week 1 and count number of weeks from date to week1.\n    return (\n      1 +\n      Math.round(\n        ((date.getTime() - week1.getTime()) / 86400000 -\n          3 +\n          ((week1.getDay() + 6) % 7)) /\n          7\n      )\n    );\n  };\n\n  let showCalendar = function (month, year) {\n    helper.bottom_bar(\"add\", \"events\", \"options\");\n\n    let firstDay = new Date(year, month).getDay();\n    let daysInMonth = 32 - new Date(year, month, 32).getDate();\n\n    let tbl = document.getElementById(\"calendar-body\");\n\n    // clearing all previous cells\n    tbl.innerHTML = \"\";\n\n    // filing data about month and in the page via DOM.\n    monthAndYear.innerHTML = months[month] + \" \" + year;\n\n    // creating all cells\n    let date = 1;\n    for (let i = 0; i < 6; i++) {\n      // creates a table row\n      let row = document.createElement(\"div\");\n      row.classList.add(\"flex\");\n      row.classList.add(\"row\");\n      row.classList.add(\"width-100\");\n\n      // creating individual cells, filing them up with data.\n      for (let j = 0; j < 7; j++) {\n        if (i === 0 && j < firstDay) {\n          let cell = document.createElement(\"div\");\n          let cellText = document.createTextNode(\"\");\n          cell.appendChild(cellText);\n          row.appendChild(cell);\n        } else if (date > daysInMonth) {\n          break;\n        } else {\n          let cell = document.createElement(\"div\");\n          let span = document.createElement(\"span\");\n          let moon = document.createElement(\"div\");\n\n          let cellText = document.createTextNode(date);\n          cell.appendChild(cellText);\n          cell.appendChild(span);\n\n          // set tabindex\n          cell.setAttribute(\"tabindex\", date - 1);\n\n          // store date with leading 0\n          // because input type date\n          // accept only day month with leading zero\n          let mmonth = `0${month + 1}`.slice(-2);\n          let day = `0${date}`.slice(-2);\n\n          let p = year + \"-\" + mmonth + \"-\" + day;\n\n          moon.classList.add(\"moon-phase-\" + getMoonPhase(year, month, date));\n          cell.appendChild(moon);\n\n          cell.setAttribute(\"data-date\", p);\n\n          cell.setAttribute(\"data-index\", new Date(p).toISOString());\n\n          // check if has event\n          if (events.length > 0) {\n            if (event_check(p).event) {\n              cell.classList.add(\"event\");\n            }\n\n            if (rrule_check(p).rrule) {\n              cell.classList.add(\"event\");\n            }\n\n            // check if has event + subscription\n            if (event_check(p).subscription == true) {\n              cell.classList.add(\"subscription\");\n            }\n          }\n\n          cell.classList.add(\"item\");\n          row.appendChild(cell);\n\n          date++;\n        }\n      }\n\n      // add weeknumbers\n      let week = document.createElement(\"span\");\n      week.classList.add(\"weeknumber\");\n\n      let weekText = document.createTextNode(\n        new Date(year, month, date).getWeek()\n      );\n\n      week.appendChild(weekText);\n      row.appendChild(week);\n\n      //add row\n      tbl.appendChild(row);\n    }\n\n    document.querySelectorAll(\".item\")[0].focus();\n    status.selected_day = document.activeElement.getAttribute(\"data-date\");\n\n    // highlight current day\n    if (today.getMonth() == month && today.getFullYear() == year) {\n      document.querySelectorAll(\".item\")[currentDay - 1].focus();\n      document.querySelectorAll(\".item\")[currentDay - 1].classList.add(\"today\");\n    }\n  };\n\n  let set_tabindex = function () {\n    document.querySelectorAll(\"div#list-view article\").forEach(function (i, p) {\n      i.setAttribute(\"tabindex\", p);\n    });\n  };\n\n  //RENDER\n\n  function renderHello(arr) {\n    document.getElementById(\"event-slider\").style.opacity = 0;\n    helper.sort_array(arr, \"dateStart\", \"date\");\n\n    var template = document.getElementById(\"template\").innerHTML;\n    var rendered = Mustache.render(template, { data: arr });\n    document.getElementById(\"list-view\").innerHTML = rendered;\n    document.getElementById(\"event-slider\").innerHTML = rendered;\n    document.getElementById(\"event-slider\").style.opacity = 100;\n\n    set_tabindex();\n    //event_check_day(document.activeElement.getAttribute(\"data-date\"));\n\n    //format date\n    document.querySelectorAll(\"article\").forEach(function (index) {\n      let t = new Date(index.getAttribute(\"data-date\"));\n      let n = new Date(index.getAttribute(\"data-date-end\"));\n\n      let d =\n        weekday[t.getDay()] +\n        \", \" +\n        t.getFullYear() +\n        \" \" +\n        months[t.getMonth()] +\n        \" \" +\n        t.getDate();\n\n      let m =\n        weekday[n.getDay()] +\n        \", \" +\n        n.getFullYear() +\n        \" \" +\n        months[n.getMonth()] +\n        \" \" +\n        n.getDate();\n\n      // to do singel day event or not\n      if (index.classList.contains(\"multidayevent\")) {\n        index.querySelector(\"div.date\").innerText = d + \" - \" + m;\n      } else {\n        index.querySelector(\"div.date\").innerText = d;\n      }\n    });\n  }\n\n  if (\"b2g.alarmManager\" in navigator) {\n    navigator.serviceWorker\n      .register(\"service-worker.js\")\n      .then((registration) => {\n        registration.systemMessageManager.subscribe(\"alarm\").then(\n          (rv) => {\n            console.log(\n              'Successfully subscribe system messages of name \"alarm\".'\n            );\n          },\n          (error) => {\n            console.log(\"Fail to subscribe system message, error: \" + error);\n          }\n        );\n      });\n  }\n\n  let clear_form = function () {\n    Array.from(document.querySelectorAll(\"div#add-edit-event input\")).forEach(\n      function (e) {\n        e.value = \"\";\n        document.getElementById(\"form-image\").src = \"\";\n        blob = \"\";\n      }\n    );\n  };\n\n  /*\n ///////////////\n// ///////////////\n// /////////////////\n// /ROUTER\n// ///////////////\n// ///////////////\n// //////////////\n*/\n\n  const month = document.getElementById(\"calendar\");\n  const add_edit_event = document.getElementById(\"add-edit-event\");\n  const list_view = document.getElementById(\"list-view\");\n  const options = document.getElementById(\"options\");\n\n  let option_button_bar = function () {\n    setTimeout(function () {\n      if (status.view == \"options\") {\n        if (\n          document.activeElement.getAttribute(\"data-function\") == \"subscription\"\n        ) {\n          helper.bottom_bar(\"delete\", \"select\", \"\");\n          return true;\n        } else {\n          helper.bottom_bar(\"\", \"select\", \"\");\n          return true;\n        }\n      }\n    }, 500);\n  };\n\n  const pages = document.querySelectorAll(\".page\");\n\n  let router = function (view) {\n    Array.from(pages).forEach(function (index) {\n      index.style.display = \"none\";\n    });\n\n    if (view == \"view\") {\n      if (status.view == \"month\") {\n        status.view = \"list-view\";\n      } else {\n        status.view = \"month\";\n      }\n    }\n\n    // add event view\n    if (status.view == \"add-edit-event\") {\n      if (document.activeElement.hasAttribute(\"data-date\"))\n        status.selected_day = document.activeElement.getAttribute(\"data-date\");\n\n      document.getElementById(\"event-date\").value = status.selected_day;\n\n      add_edit_event.style.display = \"block\";\n      Array.from(document.querySelectorAll(\"div#add-edit-event .item\")).forEach(\n        function (i, p) {\n          i.setAttribute(\"tabindex\", p);\n        }\n      );\n      add_edit_event.querySelectorAll(\".item\")[0].focus();\n      helper.bottom_bar(\"\", \"edit\", \"\");\n\n      if (document.getElementById(\"event-date-end\").value == \"\") {\n        document.getElementById(\"event-date-end\").value =\n          document.getElementById(\"event-date\").value;\n      }\n\n      if (status.edit_event) {\n        document.getElementById(\"save-event\").innerText = \"update\";\n      }\n      console.log(status.edit_event);\n\n      if (!status.edit_event) {\n        document.getElementById(\"save-event\").innerText = \"save\";\n\n        document.getElementById(\"event-notification-time\").value =\n          settings.default_notification;\n      }\n      return true;\n    }\n\n    // month view\n    if (status.view == \"month\") {\n      if (document.activeElement.hasAttribute(\"data-date\"))\n        status.selected_day = document.activeElement.getAttribute(\"data-date\");\n\n      options.style.display = \"none\";\n      month.style.display = \"block\";\n      helper.bottom_bar(\"add\", \"events\", \"options\");\n      status.edit_event = false;\n\n      let t = new Date(status.selected_day);\n      currentMonth = t.getMonth();\n      currentYear = t.getFullYear();\n\n      let k = status.selected_day;\n      showCalendar(currentMonth, currentYear);\n\n      Array.from(\n        document.querySelectorAll(\"div#calendar-body div.item\")\n      ).forEach(function (item) {\n        if (item.getAttribute(\"data-date\") == k) {\n          item.focus();\n          event_check_day(k);\n        }\n      });\n\n      clear_form();\n    }\n\n    // list view\n    if (status.view == \"list-view\") {\n      if (document.activeElement.hasAttribute(\"data-date\"))\n        status.selected_day = document.activeElement.getAttribute(\"data-date\");\n\n      options.style.display = \"none\";\n      status.edit_event = false;\n      clear_form();\n\n      helper.bottom_bar(\"edit\", \"month\", \"options\");\n\n      list_view.style.display = \"block\";\n      setTimeout(function () {\n        let articles = document.querySelectorAll(\"div#list-view article\");\n\n        let success = false;\n        for (var k = 0; k < articles.length; k++) {\n          if (articles[k].getAttribute(\"data-date\") == status.selected_day) {\n            articles[k].focus();\n            k = articles.length;\n            success = true;\n          }\n        }\n        //\n        for (var k = 0; k < articles.length; k++) {\n          console.log(articles[k].getAttribute(\"data-alarm\"));\n          if (articles[k].getAttribute(\"data-alarm\") == \"none\")\n            articles[k].querySelector(\"img.bell\").style.display = \"none\";\n        }\n        if (!success) {\n          document.querySelectorAll(\"div#list-view article\")[0].focus();\n          find_closest_date(status.selected_day);\n        }\n        const rect = document.activeElement.getBoundingClientRect();\n        const elY =\n          rect.top -\n          document.body.getBoundingClientRect().top +\n          rect.height / 2;\n\n        document.activeElement.parentNode.scrollBy({\n          left: 0,\n          top: elY - window.innerHeight / 2,\n          behavior: \"smooth\",\n        });\n      }, 1000);\n    }\n    if (status.view == \"options\") {\n      if (document.activeElement.hasAttribute(\"data-date\"))\n        status.selected_day = document.activeElement.getAttribute(\"data-date\");\n\n      if (!once) {\n        eximport.list_ics();\n        list_subscriptions();\n        once = true;\n      }\n\n      document.getElementById(\"options\").style.display = \"block\";\n      document.querySelectorAll(\"div#options .item\")[0].focus();\n      document.getElementById(\"options\").style.opacity = \"1\";\n      document.getElementById(\"subscription-form\").style.display = \"none\";\n      setTimeout(function () {\n        Array.from(document.querySelectorAll(\"div#options .item\")).forEach(\n          function (i, p) {\n            i.setAttribute(\"tabindex\", p);\n          }\n        );\n      }, 2000);\n\n      option_button_bar();\n    }\n\n    if (status.view == \"subscription\") {\n      document.getElementById(\"options\").style.opacity = \"0.3\";\n      document.getElementById(\"subscription-form\").style.display = \"block\";\n\n      document\n        .querySelectorAll(\"div#subscription-form div.item input\")[0]\n        .focus();\n\n      helper.bottom_bar(\"QR\", \"\", \"save\");\n    }\n  };\n\n  let list_subscriptions = function () {\n    if (subscriptions == null) return false;\n\n    subscriptions.forEach(function (item) {\n      document\n        .querySelector(\"div#options div#subscription-text\")\n        .insertAdjacentHTML(\n          \"afterend\",\n          '<button class=\"item dynamic\" data-function=\"subscription\">' +\n            item.name +\n            \"</button>\"\n        );\n\n      Array.from(document.querySelectorAll(\"div#options button\")).forEach(\n        function (i, p) {\n          i.setAttribute(\"tabindex\", p);\n        }\n      );\n    });\n  };\n\n  let lp = 0;\n  let load_subscriptions = function () {\n    console.log(subscriptions);\n    if (\n      subscriptions == null ||\n      subscriptions.lenght == -1 ||\n      subscriptions.lenght == \"undefined\"\n    )\n      return false;\n\n    if (lp < subscriptions.length) {\n      eximport.fetch_ics(subscriptions[lp].url, load_subscriptions);\n      lp++;\n      helper.toaster(\"subscriptions loaded\", 2000);\n    } else {\n    }\n    jump_to_today();\n\n    renderHello(events);\n\n    event_check_day(document.activeElement.getAttribute(\"data-date\"));\n    if (document.activeElement.hasAttribute(\"data-date\"))\n      status.selected_day = document.activeElement.getAttribute(\"data-date\");\n  };\n\n  let callback_scan = function (url) {\n    helper.bottom_bar(\"QR\", \"save\", \"cancel\");\n    document.querySelector(\"div#subscription-form input#cal-subs-url\").value =\n      url;\n  };\n  let subscriptions = new Array();\n  let store_subscription = function () {\n    console.log(subscriptions);\n\n    if (\n      helper.validate(document.getElementById(\"cal-subs-url\").value) &&\n      document.getElementById(\"cal-subs-name\").value != \"\"\n    ) {\n      subscriptions = [];\n      subscriptions.push({\n        url: document.getElementById(\"cal-subs-url\").value,\n        name: document.getElementById(\"cal-subs-name\").value,\n      });\n\n      document.querySelector(\"input#cal-subs-name\").val = \"\";\n      document.querySelector(\"input#cal-subs-url\").val = \"\";\n\n      localforage\n        .setItem(\"subscriptions\", subscriptions)\n        .then(function (value) {\n          document.getElementById(\"subscription-form\").style.display = \"none\";\n          helper.toaster(\"subscription stored\", 2000);\n          status.view = \"options\";\n          router();\n        })\n        .catch(function (err) {\n          // This code runs if there were any errors\n          console.log(err);\n        });\n      load_subscriptions();\n      list_subscriptions();\n    } else {\n      helper.toaster(\"Please enter a name and a valid url\", 2000);\n    }\n  };\n\n  let delete_subscription = function () {\n    let updated_subscriptions = subscriptions.filter(\n      (e) => e.name != document.activeElement.innerText\n    );\n\n    localforage\n      .setItem(\"subscriptions\", updated_subscriptions)\n      .then(function (value) {\n        //Do other things once the value has been saved.\n        console.log(\"saved: \" + value);\n        helper.toaster(\"subscription deleted\", 2000);\n        status.view = \"month\";\n        router();\n      })\n      .catch(function (err) {\n        // This code runs if there were any errors\n        helper.toaster(err, 2000);\n      });\n\n    document.activeElement.remove();\n  };\n\n  localforage\n    .getItem(\"events\")\n    .then(function (value) {\n      if (value != null) events = value;\n\n      renderHello(events);\n      jump_to_today();\n    })\n    .catch(function (err) {\n      jump_to_today();\n    });\n\n  localforage\n    .getItem(\"subscriptions\")\n    .then(function (value) {\n      subscriptions = value;\n\n      setTimeout(function () {\n        if (subscriptions == null) return false;\n        load_subscriptions();\n        console.log(subscriptions);\n      }, 2000);\n    })\n    .catch(function (err) {\n      // This code runs if there were any errors\n      console.log(err);\n    });\n\n  localforage\n    .getItem(\"settings\")\n    .then(function (value) {\n      if (value == null) return false;\n      settings = value;\n      document.getElementById(\"default-notification-time\").value =\n        settings.default_notification;\n    })\n    .catch(function (err) {\n      // This code runs if there were any errors\n      console.log(err);\n    });\n\n  function handleVisibilityChange() {\n    if (document.visibilityState === \"hidden\") {\n      status.visible = false;\n    } else {\n      setTimeout(function () {\n        status.visible = true;\n      }, 1000);\n    }\n  }\n\n  handleVisibilityChange();\n\n  /////////////////\n  ///NAVIGATION\n  /////////////////\n\n  let nav = function (move) {\n    if (\n      document.activeElement.nodeName == \"SELECT\" ||\n      document.activeElement.type == \"date\" ||\n      document.activeElement.type == \"time\"\n    )\n      return false;\n    const currentIndex = document.activeElement.tabIndex;\n    let next = currentIndex + move;\n    let items = 0;\n\n    if (status.view == \"month\") {\n      let b = document.activeElement.parentNode.parentNode;\n      items = b.querySelectorAll(\".item\");\n    }\n\n    if (status.view == \"list-view\") {\n      let b = document.activeElement.parentNode;\n      items = b.querySelectorAll(\"div#list-view article\");\n    }\n\n    if (status.view == \"subscription\") {\n      items = document.querySelectorAll(\"div#subscription-form > div.item\");\n    }\n\n    if (status.view == \"add-edit-event\" || status.view == \"options\") {\n      let b = document.activeElement.parentNode;\n      items = b.querySelectorAll(\".item\");\n\n      if (\n        document.activeElement.parentNode.classList.contains(\"input-parent\")\n      ) {\n        document.activeElement.parentNode.focus();\n        return true;\n      } else {\n        document.getElementById(\"add-edit-event\").firstElementChild.focus();\n      }\n    }\n    let targetElement = 0;\n\n    if (next <= items.length) {\n      targetElement = items[next];\n      targetElement.focus();\n    }\n\n    if (next == items.length) {\n      targetElement = items[0];\n      targetElement.focus();\n    }\n\n    const rect = document.activeElement.getBoundingClientRect();\n    const elY =\n      rect.top - document.body.getBoundingClientRect().top + rect.height / 2;\n\n    document.activeElement.parentNode.scrollBy({\n      left: 0,\n      top: elY - window.innerHeight / 2,\n      behavior: \"smooth\",\n    });\n\n    if (status.view == \"month\" || status.view == \"list-view\") {\n      if (targetElement.hasAttribute(\"data-date\")) {\n        status.selected_day = targetElement.getAttribute(\"data-date\");\n        status.selected_day_id = targetElement.getAttribute(\"data-id\");\n        event_check_day(status.selected_day);\n      }\n      return true;\n    }\n\n    if (\n      document.activeElement.id == \"form-image-wrapper\" &&\n      status.view == \"add-edit-event\"\n    ) {\n      helper.bottom_bar(\"\", \"remove image\", \"\");\n      return true;\n    }\n\n    if (\n      document.activeElement.id != \"form-image-wrapper\" &&\n      status.view == \"add-edit-event\"\n    ) {\n      helper.bottom_bar(\"\", \"edit\", \"\");\n      return true;\n    }\n  };\n\n  // foram actions\n  // after selection\n\n  document\n    .getElementById(\"event-notification-time\")\n    .addEventListener(\"change\", (event) => {\n      setTimeout(function () {\n        document\n          .getElementById(\"event-notification-time\")\n          .parentElement.focus();\n      }, 500);\n    });\n\n  //default when is not set\n  settings.default_notification = \"none\";\n\n  document\n    .getElementById(\"default-notification-time\")\n    .addEventListener(\"change\", (event) => {\n      let l = document.getElementById(\"default-notification-time\").value;\n      settings.default_notification = l;\n\n      localforage\n        .setItem(\"settings\", settings)\n        .then(function (value) {})\n        .catch(function (err) {\n          console.log(err);\n        });\n\n      setTimeout(function () {\n        document\n          .getElementById(\"default-notification-time\")\n          .parentElement.focus();\n      }, 500);\n    });\n\n  document.querySelectorAll('input[type=\"time\"]').forEach(function (item) {\n    item.addEventListener(\"change\", (event) => {\n      setTimeout(function () {\n        item.parentElement.focus();\n      }, 500);\n    });\n  });\n\n  document.querySelectorAll('input[type=\"date\"]').forEach(function (item) {\n    item.addEventListener(\"change\", (event) => {\n      setTimeout(function () {\n        item.parentElement.focus();\n      }, 500);\n    });\n  });\n\n  let add_alarm = function (date, message_text, id) {\n    // KaiOs 3.0\n    navigator.serviceWorker.ready.then(function (registration) {\n      console.log(registration);\n    });\n\n    if (\"b2g.alarmManager\" in navigator) {\n      // This is arbitrary data pass to the alarm\n      var data = {\n        foo: message_text,\n        event_id: id,\n      };\n\n      var request = navigator.b2g.alarmManager.add(date, \"honorTimezone\", data);\n\n      request.onsuccess = function () {};\n\n      request.onerror = function () {\n        console.log(\"An error occurred: \" + this.error.name);\n      };\n    } else {\n      console.log(\"API not aviable\");\n    }\n\n    // KaiOs  2.xx\n    if (navigator.mozAlarms) {\n      // This is arbitrary data pass to the alarm\n      var data = {\n        foo: message_text,\n        event_id: id,\n      };\n\n      // The \"honorTimezone\" string is what make the alarm honoring it\n\n      var request = navigator.mozAlarms.add(date, \"honorTimezone\", data);\n\n      request.onsuccess = function () {\n        // console.log(this.result);\n      };\n\n      request.onerror = function () {\n        console.log(\"An error occurred: \" + this.error.name);\n      };\n    }\n  };\n\n  // may better to compare all alarms\n  // with all events\n  // to clean\n  let remove_alarm = function (id) {\n    // KaiOs  3.00\n\n    if (\"b2g.alarmManager\" in navigator) {\n      let request = navigator.b2g.alarmManager.getAll();\n\n      request.onsuccess = function () {\n        this.result.forEach(function (alarm) {\n          if (alarm.data.event_id == id) {\n            let req = navigator.b2g.alarmManager.remove(alarm.id);\n\n            req.onsuccess = function () {\n              console.log(\"removed\");\n            };\n\n            req.onerror = function () {\n              console.log(\"An error occurred: \" + this.error.name);\n            };\n          } else {\n            console.log(\"no alarm founded\");\n          }\n        });\n      };\n\n      request.onerror = function () {\n        console.log(\"An error occurred:\", this.error.name);\n      };\n    }\n\n    // KaiOs  2.xx\n\n    if (navigator.mozAlarms) {\n      let request = navigator.mozAlarms.getAll();\n\n      request.onsuccess = function () {\n        this.result.forEach(function (alarm) {\n          if (alarm.data.event_id == id) {\n            let req = navigator.mozAlarms.remove(alarm.id);\n\n            req.onsuccess = function () {\n              console.log(\"removed\");\n            };\n\n            req.onerror = function () {\n              console.log(\"An error occurred: \" + this.error.name);\n            };\n          } else {\n            console.log(\"no alarm founded\");\n          }\n        });\n      };\n\n      request.onerror = function () {\n        console.log(\"An error occurred:\", this.error.name);\n      };\n    }\n  };\n\n  let test_alarm = function () {\n    if (navigator.mozAlarms) {\n      var request = navigator.mozAlarms.getAll();\n\n      request.onsuccess = function () {\n        this.result.forEach(function (alarm) {\n          console.log(\"Id:\", alarm.id);\n          console.log(\"date:\", alarm.date);\n          console.log(\"respectTimezone:\", alarm.respectTimezone);\n          console.log(\"data:\", JSON.stringify(alarm.data));\n        });\n      };\n\n      request.onerror = function () {\n        console.log(\"An error occurred:\", this.error.name);\n      };\n    }\n  };\n\n  // //////////////////\n  // //BUILD EVENT-LIST\n  // /////////////////\n  // /////////////\n  // /////////////\n  // STORE EVENTS//\n  // /////////////\n  // /////////////\n\n  let convert_ics_date = function (t) {\n    let nn = t.replace(/-/g, \"\");\n    nn = nn.replace(/:/g, \"\");\n    nn = nn.replace(\" \", \"T\");\n    nn = nn + \"00\";\n    return nn;\n  };\n\n  let export_data = [];\n\n  let store_event = function () {\n    let start_time = \"00:00:00\";\n    if (document.getElementById(\"event-time-start\").value != \"\") {\n      start_time = document.getElementById(\"event-time-start\").value;\n    }\n\n    let end_time = \"00:00:00\";\n    if (document.getElementById(\"event-time-end\").value != \"\") {\n      end_time = document.getElementById(\"event-time-end\").value;\n    }\n\n    let convert_dt_start =\n      document.getElementById(\"event-date\").value + \" \" + start_time;\n\n    if (document.getElementById(\"event-date-end\").value == \"\")\n      document.getElementById(\"event-date-end\").value =\n        document.getElementById(\"event-date\").value;\n\n    let convert_dt_end =\n      document.getElementById(\"event-date-end\").value + \" \" + end_time;\n\n    // notification before event\n    let notification_time = document.getElementById(\n      \"event-notification-time\"\n    ).value;\n\n    let calc_notification;\n    if (notification_time != \"none\") {\n      calc_notification = new Date(convert_dt_start);\n      calc_notification.setMinutes(\n        calc_notification.getMinutes() - notification_time\n      );\n\n      notification_time = convert_ics_date(calc_notification.toISOString());\n    }\n\n    let multidayevent = false;\n\n    let a = new Date(document.getElementById(\"event-date\").value).getTime();\n    let b = new Date(document.getElementById(\"event-date-end\").value).getTime();\n\n    if (a != b) {\n      multidayevent = true;\n    }\n\n    let rrule_convert = function () {\n      let p = document.getElementById(\"event-recur\").value;\n      let r;\n      if (p != \"\" || p != \"none\") {\n        r =\n          \"FREQ=\" +\n          document.getElementById(\"event-recur\").value +\n          \";UNTIL=\" +\n          convert_ics_date(convert_dt_end);\n      }\n      return r;\n    };\n\n    let event = {\n      UID: helper.uid(),\n      SUMMARY: document.getElementById(\"event-title\").value,\n      LOCATION: document.getElementById(\"event-location\").value,\n      DESCRIPTION: document.getElementById(\"event-description\").value,\n      CLASS: \"PRIVATE\",\n      DTSTAMP: convert_ics_date(convert_dt_start),\n      DTSTART: convert_ics_date(convert_dt_start),\n      DTEND: convert_ics_date(convert_dt_end),\n      RRULE: rrule_convert(),\n      rrule_: document.getElementById(\"event-recur\").value,\n      dateStart: document.getElementById(\"event-date\").value,\n      dateEnd: document.getElementById(\"event-date-end\").value,\n      time_start: document.getElementById(\"event-time-start\").value,\n      time_end: document.getElementById(\"event-time-end\").value,\n      alarm: document.getElementById(\"event-notification-time\").value,\n      alarmTrigger: notification_time,\n      isSubscription: false,\n      multidayevent: multidayevent,\n      ATTACH: blob,\n    };\n\n    if (event.alarm != \"none\") {\n      event.BEGIN = \"VALARM\";\n      event[\"TRIGGER;VALUE=DATE-TIME\"] = notification_time;\n      event.ACTION = \"AUDIO\";\n      event.END = \"VALARM\";\n      add_alarm(calc_notification, event.SUMMARY, event.UID);\n    }\n\n    events.push(event);\n\n    let without_subscription = events.filter(\n      (events) => events.isSubscription === false\n    );\n\n    localforage\n      .setItem(\"events\", without_subscription)\n      .then(function (value) {\n        helper.toaster(\"saved\", 2000);\n\n        // clean form\n        clear_form();\n        renderHello(events);\n\n        eximport.export_ical(\"greg.ics\", without_subscription);\n      })\n      .catch(function (err) {});\n\n    status.view = \"month\";\n    router();\n  };\n\n  // ////////////\n  // UPDATE EVENT\n  // /////////\n\n  let update_event = function () {\n    events.forEach(function (index) {\n      let a = new Date(document.getElementById(\"event-date\").value).getTime();\n      let b = new Date(\n        document.getElementById(\"event-date-end\").value\n      ).getTime();\n\n      let multidayevent = false;\n\n      if (a != b) {\n        multidayevent = true;\n      }\n\n      if (index.UID == status.selected_day_id) {\n        let start_time = \"00:00:00\";\n        if (document.getElementById(\"event-time-start\").value != \"\") {\n          start_time = document.getElementById(\"event-time-start\").value;\n        }\n\n        let end_time = \"00:00:00\";\n        if (document.getElementById(\"event-time-end\").value != \"\") {\n          end_time = document.getElementById(\"event-time-end\").value;\n        }\n\n        let convert_dt_start =\n          document.getElementById(\"event-date\").value + \" \" + start_time;\n\n        let convert_dt_end =\n          document.getElementById(\"event-date\").value + \" \" + end_time;\n\n        // notification before event\n        let notification_time = document.getElementById(\n          \"event-notification-time\"\n        ).value;\n\n        let calc_notification = \"\";\n        if (notification_time != \"none\") {\n          calc_notification = new Date(convert_dt_start);\n          calc_notification.setMinutes(\n            calc_notification.getMinutes() - notification_time\n          );\n\n          notification_time = convert_ics_date(calc_notification.toISOString());\n        }\n\n        let rrule_convert = function () {\n          let p = document.getElementById(\"event-recur\").value;\n          let r;\n          if (p != \"\" || p != \"none\") {\n            r =\n              \"FREQ=\" +\n              document.getElementById(\"event-recur\").value +\n              \";UNTIL=\" +\n              convert_ics_date(convert_dt_end);\n          }\n          return r;\n        };\n\n        index.SUMMARY = document.getElementById(\"event-title\").value;\n        index.DESCRIPTION = document.getElementById(\"event-description\").value;\n        index.LOCATION = document.getElementById(\"event-location\").value;\n        index.DTSTART = convert_ics_date(convert_dt_start);\n        index.DTEND = convert_ics_date(convert_dt_end);\n        index.dateEnd = document.getElementById(\"event-date-end\").value;\n        index.dateStart = document.getElementById(\"event-date\").value;\n        index.time_start = document.getElementById(\"event-time-start\").value;\n        index.time_end = document.getElementById(\"event-time-end\").value;\n        index.RRULE = rrule_convert();\n        index.rrule_ = document.getElementById(\"event-recur\").value;\n        index.isSubscription = false;\n        index.multidayevent = multidayevent;\n        index.alarm = document.getElementById(\"event-notification-time\").value;\n        index.alarmTrigger = notification_time;\n        if (blob != \"\") index.ATTACH = blob;\n\n        if (index.alarm != \"none\") {\n          remove_alarm(index.UID);\n          index.BEGIN = \"VALARM\";\n          index[\"TRIGGER;VALUE=DATE-TIME:\"] = notification_time;\n          index.ACTION = \"AUDIO\";\n          index.END = \"VALARM\";\n          add_alarm(calc_notification, index.SUMMARY, index.UID);\n        }\n      }\n    });\n\n    let without_subscription = events.filter(\n      (events) => events.isSubscription === false\n    );\n\n    localforage\n      .setItem(\"events\", without_subscription)\n      .then(function (value) {\n        // clean form\n        renderHello(events);\n\n        eximport.export_ical(\"greg.ics\", value);\n        status.view = \"month\";\n        router();\n        clear_form();\n      })\n      .catch(function (err) {});\n  };\n\n  // ////////////\n\n  // EDIT EVENT\n\n  // /////////\n\n  let edit_event = function () {\n    document.getElementById(\"delete-event\").style.display = \"block\";\n    document.getElementById(\"export-event\").style.display = \"block\";\n\n    events.forEach(function (index) {\n      if (index.UID == status.selected_day_id) {\n        document.getElementById(\"event-title\").value = index.SUMMARY;\n        document.getElementById(\"event-date\").value = index.dateStart;\n        document.getElementById(\"event-date-end\").value = index.dateEnd;\n        document.getElementById(\"event-time-start\").value = index.time_start;\n        document.getElementById(\"event-time-end\").value = index.time_end;\n        document.getElementById(\"event-description\").value = index.DESCRIPTION;\n        document.getElementById(\"event-location\").value = index.LOCATION;\n        document.querySelector(\"#event-notification-time\").value = index.alarm;\n        document.getElementById(\"form-image\").src = index.ATTACH;\n        document.getElementById(\"event-recur\").value = index.rrule_;\n      }\n    });\n  };\n\n  //////////////\n  //DELETE EVENT\n  ///////////\n\n  let delete_event = function () {\n    let f = false;\n\n    events = events.filter((person) => person.UID != status.selected_day_id);\n    remove_alarm(status.selected_day_id);\n    f = true;\n\n    status.edit_event = false;\n    let without_subscription = events.filter(\n      (events) => events.isSubscription === false\n    );\n\n    clear_form();\n\n    localforage\n      .setItem(\"events\", without_subscription)\n      .then(function (value) {\n        renderHello(events);\n\n        eximport.export_ical(\"greg.ics\", value);\n      })\n      .catch(function (err) {\n        // This code runs if there were any errors\n        console.log(err);\n      });\n\n    return f;\n  };\n\n  // event slider\n  let t = new Date();\n  let m = `0${t.getMonth() + 1}`.slice(-2);\n  let d = `0${t.getDate()}`.slice(-2);\n  let y = t.getFullYear();\n  event_check_day(y + \"-\" + m + \"-\" + d);\n\n  // callback import event\n  let import_event = function (id, date) {\n    //status.selected_day = date;\n    //status.selected_day_id = id;\n    helper.bottom_bar(\"edit\", \"\", \"\");\n\n    //renderHello(events);\n    let without_subscription = events.filter(\n      (events) => events.isSubscription === false\n    );\n\n    localforage\n      .setItem(\"events\", without_subscription)\n      .then(function (value) {\n        renderHello(events);\n\n        eximport.export_ical(\"greg.ics\", without_subscription);\n      })\n      .catch(function (err) {});\n  };\n\n  let set_datetime_form = function () {\n    let d = new Date();\n    let d_h = `0${d.getHours()}`.slice(-2);\n    let d_m = `0${d.getMinutes()}`.slice(-2);\n    let p = d_h + \":\" + d_m;\n\n    let d_h_ = `0${d.getHours() + 1}`.slice(-2);\n    let d_m_ = `0${d.getMinutes()}`.slice(-2);\n    if (d_h_ > 23) d_h_ = \"23\";\n\n    let pp = d_h_ + \":\" + d_m_;\n\n    document.getElementById(\"event-time-start\").value = p;\n    document.getElementById(\"event-time-end\").value = pp;\n  };\n\n  let pick_image_callback = function (resultBlob) {\n    let t = document.getElementById(\"form-image\");\n\n    t.src = URL.createObjectURL(resultBlob);\n    document.getElementById(\"form-image-wrapper\").classList.add(\"item\");\n\n    document\n      .querySelectorAll(\"div#add-edit-event .item\")\n      .forEach(function (i, p) {\n        i.setAttribute(\"tabindex\", p);\n      });\n\n    let fr = new FileReader();\n    fr.onload = function () {\n      blob = fr.result;\n    };\n    fr.readAsDataURL(resultBlob);\n  };\n\n  // ////////////////////////////\n  // //KEYPAD HANDLER////////////\n  // ////////////////////////////\n\n  let longpress = false;\n  const longpress_timespan = 1000;\n  let timeout;\n\n  function repeat_action(param) {\n    switch (param.key) {\n      case \"0\":\n        break;\n    }\n  }\n\n  // ////////////\n\n  // //LONGPRESS\n\n  // ///////////\n\n  function longpress_action(param) {\n    switch (param.key) {\n      case \"0\":\n        break;\n\n      case \"Backspace\":\n        window.close();\n        break;\n\n      case \"ArrowLeft\":\n        if (status.view == \"list-view\") {\n        }\n\n        break;\n    }\n  }\n\n  // /////////////\n  // //SHORTPRESS\n  // ////////////\n\n  function shortpress_action(param) {\n    switch (param.key) {\n      case \"*\":\n        jump_to_today();\n\n        break;\n\n      case \"ArrowUp\":\n        if (status.view == \"month\") {\n          nav(-7);\n        }\n        if (\n          status.view == \"add-edit-event\" ||\n          status.view == \"list-view\" ||\n          status.view == \"options\" ||\n          status.view == \"subscription\"\n        ) {\n          nav(-1);\n        }\n        break;\n      case \"ArrowDown\":\n        if (status.view == \"month\") {\n          nav(+7);\n        }\n        if (\n          status.view == \"add-edit-event\" ||\n          status.view == \"list-view\" ||\n          status.view == \"options\" ||\n          status.view == \"subscription\"\n        ) {\n          nav(+1);\n        }\n\n        break;\n      case \"ArrowRight\":\n        if (status.view != \"month\") return true;\n\n        nav(1);\n        break;\n      case \"ArrowLeft\":\n        if (status.view != \"month\") return true;\n\n        nav(-1);\n\n        break;\n\n      case \"1\":\n        previous();\n        break;\n      case \"3\":\n        next();\n        break;\n\n      case \"2\":\n        slider_navigation();\n        break;\n\n      case \"#\":\n        document\n          .querySelectorAll(\n            \"div#calendar div#calendar-body div div [class^='moon-phase-']\"\n          )\n          .forEach(function (e) {\n            e.classList.toggle(\"active\");\n          });\n        break;\n\n      case \"7\":\n        break;\n\n      case \"SoftRight\":\n      case \"Alt\":\n        console.log(status.view);\n        if (status.view == \"month\") {\n          status.view = \"options\";\n          router();\n\n          return true;\n        }\n\n        if (status.view == \"subscription\") {\n          // store subscription\n          store_subscription();\n          return true;\n        }\n        break;\n\n      case \"SoftLeft\":\n      case \"Control\":\n        if (status.view == \"list-view\") {\n          if (document.activeElement.classList.contains(\"subscription\")) {\n            helper.toaster(\"a subscription cannot be edited\", 2000);\n            return false;\n          }\n\n          status.selected_day_id =\n            document.activeElement.getAttribute(\"data-id\");\n\n          status.edit_event = true;\n\n          edit_event();\n          status.view = \"add-edit-event\";\n          router();\n        }\n        if (status.view == \"subscription\") {\n          qr.start_scan(callback_scan);\n          return true;\n        }\n\n        if (status.view == \"options\") {\n          delete_subscription();\n          return true;\n        }\n\n        if (status.view == \"month\") {\n          status.view = \"add-edit-event\";\n          router();\n\n          // when new event\n\n          // set time\n          set_datetime_form();\n\n          return true;\n        }\n        break;\n\n      case \"Enter\":\n        if (!status.visible) return false;\n\n        if (document.activeElement.classList.contains(\"input-parent\")) {\n          document.activeElement.children[1].focus();\n          return true;\n        }\n\n        if (document.activeElement.id == \"export-event\") {\n          events.forEach(function (index) {\n            if (index.UID == status.selected_day_id) {\n              export_data.push(index);\n            }\n          });\n\n          eximport.export_ical(export_data[0].UID + \".ics\", export_data);\n          helper.toaster(\"event exported\", 2000);\n\n          return true;\n        }\n\n        if (document.activeElement.id == \"select-image\") {\n          helper.pick_image(pick_image_callback);\n          return true;\n        }\n\n        if (document.activeElement.id == \"form-image-wrapper\") {\n          document.getElementById(\"form-image\").src = \"\";\n          blob = \"\";\n          return true;\n        }\n\n        if (\n          document.activeElement.getAttribute(\"data-function\") ==\n          \"add-subscription\"\n        ) {\n          status.view = \"subscription\";\n          router();\n          return true;\n        }\n\n        // same button with different text and action\n        if (document.activeElement.id == \"save-event\") {\n          if (status.edit_event) {\n            update_event();\n          } else {\n            store_event();\n          }\n\n          return true;\n        }\n\n        if (document.activeElement.id == \"delete-event\") {\n          if (delete_event()) {\n            status.view = \"month\";\n            router();\n          }\n          return true;\n        }\n\n        if (status.view == \"options\") {\n          if (\n            document.activeElement.getAttribute(\"data-function\") == \"export\"\n          ) {\n            localforage\n              .getItem(\"events\")\n              .then(function (value) {\n                eximport.export_ical(\"greg.ics\", value);\n              })\n              .catch(function (err) {\n                console.log(err);\n              });\n          }\n\n          if (\n            document.activeElement.getAttribute(\"data-function\") == \"import\"\n          ) {\n            eximport.loadICS(\n              document.activeElement.getAttribute(\"data-filename\"),\n              import_event\n            );\n          }\n          return true;\n        }\n        if (status.view == \"month\" || status.view == \"list-view\")\n          router(\"view\");\n\n        break;\n\n      case \"Backspace\":\n        if (\n          status.view == \"add-edit-event\" &&\n          document.activeElement.tagName != \"INPUT\"\n        ) {\n          status.view = \"month\";\n          router();\n        }\n\n        if (status.view == \"options\") {\n          status.view = \"month\";\n          router();\n        }\n\n        if (status.view == \"scan\") {\n          status.views = \"subscription\";\n          router();\n        }\n\n        break;\n    }\n  }\n\n  // ///////////////////////////////\n  // //shortpress / longpress logic\n  // //////////////////////////////\n\n  function handleKeyDown(evt) {\n    option_button_bar();\n    if (evt.key === \"Backspace\") {\n      if (\n        status.view == \"options\" ||\n        status.view == \"add-edit-event\" ||\n        status.view == \"scan\"\n      ) {\n        evt.preventDefault();\n      }\n    }\n\n    if (evt.key === \"EndCall\") {\n      evt.preventDefault();\n      window.close();\n    }\n    if (!evt.repeat) {\n      longpress = false;\n      timeout = setTimeout(() => {\n        longpress = true;\n        longpress_action(evt);\n      }, longpress_timespan);\n    }\n\n    if (evt.repeat) {\n      if (evt.key == \"Backspace\") longpress = false;\n\n      repeat_action(evt);\n    }\n  }\n\n  function handleKeyUp(evt) {\n    if (status.visible === false) return false;\n\n    if (evt.key == \"Backspace\" && document.activeElement.tagName == \"INPUT\") {\n    }\n\n    clearTimeout(timeout);\n    if (!longpress) {\n      shortpress_action(evt);\n    }\n  }\n\n  document.addEventListener(\"keydown\", handleKeyDown);\n  document.addEventListener(\"keyup\", handleKeyUp);\n\n  document.addEventListener(\"visibilitychange\", handleVisibilityChange, false);\n  console.log(\"DOM is loaded\");\n});\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}