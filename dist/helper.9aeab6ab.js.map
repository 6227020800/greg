{"version":3,"sources":["assets/js/helper.js"],"names":["helper","navigator","mozSetMessageHandler","message","title","body","console","log","JSON","stringify","data","foo","window","Notification","requestPermission","then","result","notification","onerror","err","onclick","event","mozApps","request","getSelf","onsuccess","close","launch","open","document","location","origin","onshow","getManifest","lock","queue","toast_q","text","time","x","querySelector","innerHTML","style","transform","setTimeout","slice","length","queue_st","toast_qq","bottom_bar","left","center","right","textContent","display","list_files","filetype","callback","d","cursor","getDeviceStorage","enumerate","name","file","n","split","continue","warn","error","self","toaster","push","side_toaster","add_script","script","appendChild","createElement","src","deleteFile","storage","path","sdcard","requestDel","getDeviceStorages","delete","goodbye","getElementById","localStorage","clickcount","Number","screenlock","stat","requestWakeLock","alert","topic","unlock","validate","url","pattern","test","formatFileSize","bytes","decimalPoint","undefined","NaN","k","dm","i","Math","floor","parseFloat","pow","toFixed","top_bar","notify","param_title","param_text","param_silent","options","silent","requireInteraction","permission","uid","_p8","s","p","random","toString","substr","sort_array","arr","item_key","type","sort","a","b","da","Date","fa","toLowerCase","fb","pick_image","cb","activity","MozActivity","blob","hashCode","str","hash","charCodeAt","intToRGB","c","toUpperCase","substring","getRandomInteger","min","max","ceil","share","check_iconnection","addEventListener","updateOfflineStatus","delete_file","filename","get_file","get","write_file","Blob","addNamed","NodeList","prototype","forEach","Array"],"mappings":"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","file":"helper.9aeab6ab.js","sourceRoot":"../application","sourcesContent":["\"use strict\";\n\nconst helper = (() => {\n  let sort_array = function (arr, item_key, type) {\n    if (type == \"date\") {\n      arr.sort((a, b) => {\n        let da = new Date(a[item_key]),\n          db = new Date(b[item_key]);\n        return da - db;\n      });\n    }\n\n    //sort by number\n    if (type == \"number\") {\n      arr.sort((a, b) => {\n        return b[item_key] - a[item_key];\n      });\n    }\n    //sort by string\n    if (type == \"string\") {\n      arr.sort((a, b) => {\n        let fa = a[item_key].toLowerCase(),\n          fb = b[item_key].toLowerCase();\n\n        if (fa < fb) {\n          return -1;\n        }\n        if (fa > fb) {\n          return 1;\n        }\n        return 0;\n      });\n    }\n  };\n\n  let uid = function () {\n    function _p8(s) {\n      var p = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n      return s ? \"-\" + p.substr(0, 4) + \"-\" + p.substr(4, 4) : p;\n    }\n    return \"greg@\" + _p8() + _p8(true) + _p8(true) + _p8();\n  };\n\n  let notification = \"\";\n  let notify = function (param_title, param_text, param_silent) {\n    var options = {\n      body: param_text,\n      silent: param_silent,\n      requireInteraction: false,\n      //actions: [{ action: \"test\", title: \"test\" }],\n    };\n\n    // Let's check whether notification permissions have already been granted\n    if (Notification.permission === \"granted\") {\n      // If it's okay let's create a notification\n      notification = new Notification(param_title, options);\n    }\n\n    // Otherwise, we need to ask the user for permission\n    if (Notification.permission !== \"denied\") {\n      Notification.requestPermission().then(function (permission) {\n        // If the user accepts, let's create a notification\n        if (permission === \"granted\") {\n          notification = new Notification(param_title, options);\n        }\n      });\n    }\n  };\n\n  //https://notifications.spec.whatwg.org/#dictdef-notificationaction\n\n  const pushLocalNotification = function (title, body) {\n    window.Notification.requestPermission().then((result) => {\n      var notification = new window.Notification(title, {\n        body: body,\n        //requireInteraction: true,\n      });\n\n      notification.onerror = function (err) {\n        console.log(err);\n      };\n      notification.onclick = function (event) {\n        if (window.navigator.mozApps) {\n          var request = window.navigator.mozApps.getSelf();\n          request.onsuccess = function () {\n            if (request.result) {\n              notification.close();\n              request.result.launch();\n            }\n          };\n        } else {\n          window.open(document.location.origin, \"_blank\");\n        }\n      };\n      notification.onshow = function () {\n        // notification.close();\n      };\n    });\n  };\n  if (navigator.mozSetMessageHandler) {\n    navigator.mozSetMessageHandler(\"alarm\", function (message) {\n      console.log(JSON.stringify(message));\n      pushLocalNotification(\"Greg\", message.data.foo);\n    });\n  }\n\n  function validate(url) {\n    var pattern =\n      /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n    if (pattern.test(url)) {\n      return true;\n    }\n    return false;\n  }\n\n  let getManifest = function (callback) {\n    if (!navigator.mozApps) {\n      //let t = document.getElementById(\"kaisos-ads\");\n      //t.remove();\n      return false;\n    }\n    let self = navigator.mozApps.getSelf();\n    self.onsuccess = function () {\n      callback(self.result);\n    };\n    self.onerror = function () {};\n  };\n\n  //top toaster\n  let queue = [];\n  let timeout;\n  let toaster = function (text, time) {\n    queue.push({ text: text, time: time });\n    if (queue.length === 1) {\n      toast_q(text, time);\n    }\n  };\n\n  let toast_q = function (text, time) {\n    var x = document.querySelector(\"div#toast\");\n    x.innerHTML = queue[0].text;\n\n    x.style.transform = \"translate(0px, 0px)\";\n\n    timeout = setTimeout(function () {\n      timeout = null;\n      x.style.transform = \"translate(0px, -100px)\";\n      queue = queue.slice(1);\n      if (queue.length > 0) {\n        setTimeout(() => {\n          toast_q(text, time);\n        }, 1000);\n      }\n    }, time);\n  };\n\n  //side toaster\n\n  let queue_st = [];\n  let ttimeout;\n  let side_toaster = function (text, time) {\n    queue_st.push({ text: text, time: time });\n    if (queue_st.length === 1) {\n      toast_qq(text, time);\n    }\n  };\n\n  let toast_qq = function (text, time) {\n    var x = document.querySelector(\"div#side-toast\");\n    x.innerHTML = queue_st[0].text;\n\n    x.style.transform = \"translate(0vh, 0px)\";\n\n    timeout = setTimeout(function () {\n      ttimeout = null;\n      x.style.transform = \"translate(-100vh,0px)\";\n      queue_st = queue.slice(1);\n      if (queue_st.length > 0) {\n        setTimeout(() => {\n          toast_qq(text, time);\n        }, 1000);\n      }\n    }, time);\n  };\n\n  //bottom bar\n  let bottom_bar = function (left, center, right) {\n    document.querySelector(\"div#bottom-bar div#button-left\").textContent = left;\n    document.querySelector(\"div#bottom-bar div#button-center\").textContent =\n      center;\n    document.querySelector(\"div#bottom-bar div#button-right\").textContent =\n      right;\n\n    if (left == \"\" && center == \"\" && right == \"\") {\n      document.querySelector(\"div#bottom-bar\").style.display = \"none\";\n    } else {\n      document.querySelector(\"div#bottom-bar\").style.display = \"block\";\n    }\n  };\n\n  //top bar\n  let top_bar = function (left, center, right) {\n    document.querySelector(\"div#top-bar div.button-left\").innerHTML = left;\n    document.querySelector(\"div#top-bar div.button-center\").textContent =\n      center;\n    document.querySelector(\"div#top-bar div.button-right\").textContent = right;\n\n    if (left == \"\" && center == \"\" && right == \"\") {\n      document.querySelector(\"div#top-bar\").style.display = \"none\";\n    } else {\n      document.querySelector(\"div#top-bar\").style.display = \"block\";\n    }\n  };\n\n  let add_script = function (script) {\n    document.body.appendChild(document.createElement(\"script\")).src = script;\n  };\n\n  let lock;\n  let screenlock = function (stat) {\n    if (typeof window.navigator.requestWakeLock === \"undefined\") {\n      return false;\n    }\n    if (stat == \"lock\") {\n      lock = window.navigator.requestWakeLock(\"screen\");\n      lock.onsuccess = function () {};\n      lock.onerror = function () {\n        alert(\"An error occurred: \" + this.error.name);\n      };\n    }\n\n    if (stat == \"unlock\") {\n      if (lock.topic == \"screen\") {\n        lock.unlock();\n      }\n    }\n  };\n\n  //filesize\n  function formatFileSize(bytes, decimalPoint) {\n    if (bytes || bytes > 0 || bytes != undefined || bytes != NaN) {\n      var k = 1000,\n        dm = decimalPoint || 2,\n        sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"],\n        i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\n    }\n  }\n\n  //goodbye\n\n  let goodbye = function () {\n    document.getElementById(\"goodbye\").style.display = \"block\";\n    bottom_bar(\"\", \"\", \"\");\n\n    if (localStorage.clickcount) {\n      localStorage.clickcount = Number(localStorage.clickcount) + 1;\n    } else {\n      localStorage.clickcount = 1;\n    }\n\n    if (localStorage.clickcount == 300000) {\n      message();\n    } else {\n      document.getElementById(\"ciao\").style.display = \"block\";\n      setTimeout(function () {\n        window.close();\n      }, 2000);\n    }\n\n    function message() {\n      document.getElementById(\"donation\").style.display = \"block\";\n      setTimeout(function () {\n        localStorage.clickcount = 1;\n\n        window.close();\n      }, 3000);\n    }\n  };\n  //pick image\n  let pick_image = function (cb) {\n    var activity = new MozActivity({\n      name: \"pick\",\n      data: {\n        type: [\"image/png\", \"image/jpg\", \"image/jpeg\"],\n      },\n    });\n\n    activity.onsuccess = function () {\n      console.log(\"Activity successfuly handled\");\n\n      let p = this.result.blob;\n      cb(p);\n    };\n\n    activity.onerror = function () {\n      console.log(\"The activity encouter en error: \" + this.error);\n    };\n  };\n\n  //delete file\n  function deleteFile(storage, path, notification) {\n    let sdcard = navigator.getDeviceStorages(\"sdcard\");\n\n    let requestDel = sdcard[storage].delete(path);\n\n    requestDel.onsuccess = function () {\n      if (notification == \"notification\") {\n        helper.toaster(\n          'File \"' +\n            name +\n            '\" successfully deleted frome the sdcard storage area'\n        );\n      }\n    };\n\n    requestDel.onerror = function () {\n      helper.toaster(\"Unable to delete the file: \" + this.error);\n    };\n  }\n\n  let list_files = function (filetype, callback) {\n    var d = navigator.getDeviceStorage(\"sdcard\");\n\n    var cursor = d.enumerate();\n\n    cursor.onsuccess = function () {\n      if (!this.result) {\n        console.log(\"finished\");\n      }\n      if (cursor.result.name !== null) {\n        var file = cursor.result;\n        let n = file.name.split(\".\");\n        let file_type = n[n.length - 1];\n\n        if (file_type == filetype) {\n          callback(file.name);\n        }\n        this.continue();\n      }\n    };\n\n    cursor.onerror = function () {\n      console.warn(\"No file found: \" + this.error);\n    };\n  };\n\n  return {\n    list_files,\n    getManifest,\n    toaster,\n    side_toaster,\n    add_script,\n    deleteFile,\n    goodbye,\n    screenlock,\n    validate,\n    formatFileSize,\n    top_bar,\n    bottom_bar,\n    notify,\n    uid,\n    sort_array,\n    pick_image,\n  };\n})();\n\n//polyfill\nif (window.NodeList && !NodeList.prototype.forEach) {\n  NodeList.prototype.forEach = Array.prototype.forEach;\n}\n\nfunction hashCode(str) {\n  var hash = 0;\n  for (var i = 0; i < str.length; i++) {\n    hash = ~~((hash << 5) - hash + str.charCodeAt(i));\n  }\n  return hash;\n}\n\nfunction intToRGB(i) {\n  var c = (i & 0x00ffffff).toString(16).toUpperCase();\n\n  return \"00000\".substring(0, 6 - c.length) + c;\n}\n\nfunction getRandomInteger(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nfunction share(url) {\n  var activity = new MozActivity({\n    name: \"share\",\n    data: {\n      type: \"url\",\n      url: url,\n    },\n  });\n\n  activity.onsuccess = function () {};\n\n  activity.onerror = function () {\n    console.log(\"The activity encounter en error: \" + this.error);\n  };\n}\n\n//check if internet connection\nfunction check_iconnection() {\n  function updateOfflineStatus() {\n    toaster(\"Your Browser is offline\", 15000);\n    return false;\n  }\n\n  window.addEventListener(\"offline\", updateOfflineStatus);\n}\n\nfunction delete_file(filename) {\n  var sdcard = navigator.getDeviceStorages(\"sdcard\");\n  var request = sdcard[1].delete(filename);\n\n  request.onsuccess = function () {\n    //toaster(\"File deleted\", 2000);\n  };\n\n  request.onerror = function () {\n    //toaster(\"Unable to delete the file: \" + this.error, 2000);\n  };\n}\n\nfunction get_file(filename) {\n  var sdcard = navigator.getDeviceStorages(\"sdcard\");\n  var request = sdcard[1].get(filename);\n\n  request.onsuccess = function () {\n    var file = this.result;\n    //alert(\"Get the file: \" + file.name);\n  };\n\n  request.onerror = function () {\n    //alert(\"Unable to get the file: \" + this.error);\n  };\n}\n\nfunction write_file(data, filename) {\n  var sdcard = navigator.getDeviceStorages(\"sdcard\");\n  var file = new Blob([data], {\n    type: \"text/plain\",\n  });\n  var request = sdcard[1].addNamed(file, filename);\n\n  request.onsuccess = function () {\n    var name = this.result;\n    //toaster('File \"' + name + '\" successfully wrote on the sdcard storage area', 2000);\n  };\n\n  // An error typically occur if a file with the same name already exist\n  request.onerror = function () {\n    toaster(\"Unable to write the file: \" + this.error, 2000);\n  };\n}\n"]}