{"id":"Wsof","dependencies":[{"name":"/home/strukturart/Desktop/Pages/greg/package.json","includedInParent":true,"mtime":1644529328454}],"generated":{"js":"var e=function(e){var t,a,o=function(){t.srcObject.getTracks().forEach(function(e){e.stop(),document.getElementById(\"qr-screen\").style.display=\"none\"}),t.srcObject=null,status.views=\"subscription\",helper.bottom_bar(\"QR\",\"save\",\"chancel\")};return{start_scan:function(e){status.view=\"scan\",document.getElementById(\"qr-screen\").style.display=\"block\",navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!1,video:{width:200,height:200}},function(n){(t=document.querySelector(\"video\")).srcObject=n,t.onloadedmetadata=function(n){t.play();var r=document.createElement(\"canvas\");a=setInterval(function(){r.width=t.videoWidth,r.height=t.videoHeight;var n=r.getContext(\"2d\"),i=Math.max(1,Math.floor(t.videoWidth)),s=Math.max(1,Math.floor(t.videoHeight));n.drawImage(t,0,0,i,s);var c=n.getImageData(0,0,i,s).data,d=jsQR(c,i,s);console.log(d),d&&(o(),e(d.data),status.view=\"subscription\",clearInterval(a))},1e3)}},function(e){console.log(\"The following error occurred: \"+e.name)}):console.log(\"getUserMedia not supported\")},stop_scan:o}}();"},"sourceMaps":{"js":{"mappings":[{"source":"assets/js/scan.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"assets/js/scan.js","name":"qr","original":{"line":1,"column":6},"generated":{"line":1,"column":4}},{"source":"assets/js/scan.js","original":{"line":1,"column":12},"generated":{"line":1,"column":6}},{"source":"assets/js/scan.js","name":"_","original":{"line":1,"column":13},"generated":{"line":1,"column":15}},{"source":"assets/js/scan.js","name":"video","original":{"line":2,"column":6},"generated":{"line":1,"column":18}},{"source":"assets/js/scan.js","name":"video","original":{"line":2,"column":6},"generated":{"line":1,"column":22}},{"source":"assets/js/scan.js","name":"intv","original":{"line":3,"column":6},"generated":{"line":1,"column":24}},{"source":"assets/js/scan.js","name":"stop_scan","original":{"line":70,"column":6},"generated":{"line":1,"column":26}},{"source":"assets/js/scan.js","original":{"line":70,"column":18},"generated":{"line":1,"column":28}},{"source":"assets/js/scan.js","name":"video","original":{"line":71,"column":19},"generated":{"line":1,"column":39}},{"source":"assets/js/scan.js","name":"srcObject","original":{"line":71,"column":25},"generated":{"line":1,"column":41}},{"source":"assets/js/scan.js","name":"getTracks","original":{"line":72,"column":26},"generated":{"line":1,"column":51}},{"source":"assets/js/scan.js","name":"forEach","original":{"line":74,"column":11},"generated":{"line":1,"column":63}},{"source":"assets/js/scan.js","original":{"line":74,"column":19},"generated":{"line":1,"column":71}},{"source":"assets/js/scan.js","name":"track","original":{"line":74,"column":29},"generated":{"line":1,"column":80}},{"source":"assets/js/scan.js","name":"track","original":{"line":75,"column":6},"generated":{"line":1,"column":83}},{"source":"assets/js/scan.js","name":"stop","original":{"line":75,"column":12},"generated":{"line":1,"column":85}},{"source":"assets/js/scan.js","name":"document","original":{"line":76,"column":6},"generated":{"line":1,"column":92}},{"source":"assets/js/scan.js","name":"getElementById","original":{"line":76,"column":15},"generated":{"line":1,"column":101}},{"source":"assets/js/scan.js","original":{"line":76,"column":30},"generated":{"line":1,"column":116}},{"source":"assets/js/scan.js","name":"style","original":{"line":76,"column":43},"generated":{"line":1,"column":129}},{"source":"assets/js/scan.js","name":"display","original":{"line":76,"column":49},"generated":{"line":1,"column":135}},{"source":"assets/js/scan.js","original":{"line":76,"column":59},"generated":{"line":1,"column":143}},{"source":"assets/js/scan.js","name":"video","original":{"line":79,"column":4},"generated":{"line":1,"column":152}},{"source":"assets/js/scan.js","name":"srcObject","original":{"line":79,"column":10},"generated":{"line":1,"column":154}},{"source":"assets/js/scan.js","original":{"line":79,"column":22},"generated":{"line":1,"column":164}},{"source":"assets/js/scan.js","name":"status","original":{"line":80,"column":4},"generated":{"line":1,"column":169}},{"source":"assets/js/scan.js","name":"views","original":{"line":80,"column":11},"generated":{"line":1,"column":176}},{"source":"assets/js/scan.js","original":{"line":80,"column":19},"generated":{"line":1,"column":182}},{"source":"assets/js/scan.js","name":"helper","original":{"line":82,"column":4},"generated":{"line":1,"column":197}},{"source":"assets/js/scan.js","name":"bottom_bar","original":{"line":82,"column":11},"generated":{"line":1,"column":204}},{"source":"assets/js/scan.js","original":{"line":82,"column":22},"generated":{"line":1,"column":215}},{"source":"assets/js/scan.js","original":{"line":82,"column":28},"generated":{"line":1,"column":220}},{"source":"assets/js/scan.js","original":{"line":82,"column":36},"generated":{"line":1,"column":227}},{"source":"assets/js/scan.js","original":{"line":85,"column":9},"generated":{"line":1,"column":239}},{"source":"assets/js/scan.js","original":{"line":85,"column":9},"generated":{"line":1,"column":245}},{"source":"assets/js/scan.js","name":"start_scan","original":{"line":86,"column":4},"generated":{"line":1,"column":246}},{"source":"assets/js/scan.js","original":{"line":4,"column":19},"generated":{"line":1,"column":257}},{"source":"assets/js/scan.js","name":"callback","original":{"line":4,"column":29},"generated":{"line":1,"column":266}},{"source":"assets/js/scan.js","name":"status","original":{"line":5,"column":4},"generated":{"line":1,"column":269}},{"source":"assets/js/scan.js","name":"view","original":{"line":5,"column":11},"generated":{"line":1,"column":276}},{"source":"assets/js/scan.js","original":{"line":5,"column":18},"generated":{"line":1,"column":281}},{"source":"assets/js/scan.js","name":"document","original":{"line":8,"column":4},"generated":{"line":1,"column":288}},{"source":"assets/js/scan.js","name":"getElementById","original":{"line":8,"column":13},"generated":{"line":1,"column":297}},{"source":"assets/js/scan.js","original":{"line":8,"column":28},"generated":{"line":1,"column":312}},{"source":"assets/js/scan.js","name":"style","original":{"line":8,"column":41},"generated":{"line":1,"column":325}},{"source":"assets/js/scan.js","name":"display","original":{"line":8,"column":47},"generated":{"line":1,"column":331}},{"source":"assets/js/scan.js","original":{"line":8,"column":57},"generated":{"line":1,"column":339}},{"source":"assets/js/scan.js","name":"navigator","original":{"line":10,"column":4},"generated":{"line":1,"column":347}},{"source":"assets/js/scan.js","name":"getUserMedia","original":{"line":10,"column":14},"generated":{"line":1,"column":357}},{"source":"assets/js/scan.js","name":"navigator","original":{"line":11,"column":6},"generated":{"line":1,"column":370}},{"source":"assets/js/scan.js","name":"getUserMedia","original":{"line":11,"column":16},"generated":{"line":1,"column":380}},{"source":"assets/js/scan.js","name":"navigator","original":{"line":12,"column":6},"generated":{"line":1,"column":394}},{"source":"assets/js/scan.js","name":"webkitGetUserMedia","original":{"line":12,"column":16},"generated":{"line":1,"column":404}},{"source":"assets/js/scan.js","name":"navigator","original":{"line":13,"column":6},"generated":{"line":1,"column":424}},{"source":"assets/js/scan.js","name":"mozGetUserMedia","original":{"line":13,"column":16},"generated":{"line":1,"column":434}},{"source":"assets/js/scan.js","name":"navigator","original":{"line":15,"column":8},"generated":{"line":1,"column":450}},{"source":"assets/js/scan.js","name":"getUserMedia","original":{"line":15,"column":18},"generated":{"line":1,"column":460}},{"source":"assets/js/scan.js","name":"navigator","original":{"line":16,"column":6},"generated":{"line":1,"column":473}},{"source":"assets/js/scan.js","name":"getUserMedia","original":{"line":16,"column":16},"generated":{"line":1,"column":483}},{"source":"assets/js/scan.js","original":{"line":17,"column":8},"generated":{"line":1,"column":496}},{"source":"assets/js/scan.js","name":"audio","original":{"line":18,"column":10},"generated":{"line":1,"column":497}},{"source":"assets/js/scan.js","original":{"line":18,"column":17},"generated":{"line":1,"column":504}},{"source":"assets/js/scan.js","name":"video","original":{"line":19,"column":10},"generated":{"line":1,"column":506}},{"source":"assets/js/scan.js","original":{"line":19,"column":17},"generated":{"line":1,"column":512}},{"source":"assets/js/scan.js","name":"width","original":{"line":20,"column":12},"generated":{"line":1,"column":513}},{"source":"assets/js/scan.js","original":{"line":20,"column":19},"generated":{"line":1,"column":519}},{"source":"assets/js/scan.js","name":"height","original":{"line":21,"column":12},"generated":{"line":1,"column":523}},{"source":"assets/js/scan.js","original":{"line":21,"column":20},"generated":{"line":1,"column":530}},{"source":"assets/js/scan.js","original":{"line":24,"column":8},"generated":{"line":1,"column":536}},{"source":"assets/js/scan.js","name":"stream","original":{"line":24,"column":18},"generated":{"line":1,"column":545}},{"source":"assets/js/scan.js","name":"video","original":{"line":25,"column":10},"generated":{"line":1,"column":549}},{"source":"assets/js/scan.js","name":"document","original":{"line":25,"column":18},"generated":{"line":1,"column":551}},{"source":"assets/js/scan.js","name":"querySelector","original":{"line":25,"column":27},"generated":{"line":1,"column":560}},{"source":"assets/js/scan.js","original":{"line":25,"column":41},"generated":{"line":1,"column":574}},{"source":"assets/js/scan.js","name":"srcObject","original":{"line":26,"column":16},"generated":{"line":1,"column":584}},{"source":"assets/js/scan.js","name":"stream","original":{"line":26,"column":28},"generated":{"line":1,"column":594}},{"source":"assets/js/scan.js","name":"video","original":{"line":28,"column":10},"generated":{"line":1,"column":596}},{"source":"assets/js/scan.js","name":"onloadedmetadata","original":{"line":28,"column":16},"generated":{"line":1,"column":598}},{"source":"assets/js/scan.js","original":{"line":28,"column":35},"generated":{"line":1,"column":615}},{"source":"assets/js/scan.js","name":"e","original":{"line":28,"column":45},"generated":{"line":1,"column":624}},{"source":"assets/js/scan.js","name":"video","original":{"line":29,"column":12},"generated":{"line":1,"column":627}},{"source":"assets/js/scan.js","name":"play","original":{"line":29,"column":18},"generated":{"line":1,"column":629}},{"source":"assets/js/scan.js","name":"barcodeCanvas","original":{"line":31,"column":16},"generated":{"line":1,"column":636}},{"source":"assets/js/scan.js","name":"barcodeCanvas","original":{"line":31,"column":16},"generated":{"line":1,"column":640}},{"source":"assets/js/scan.js","name":"document","original":{"line":31,"column":32},"generated":{"line":1,"column":642}},{"source":"assets/js/scan.js","name":"createElement","original":{"line":31,"column":41},"generated":{"line":1,"column":651}},{"source":"assets/js/scan.js","original":{"line":31,"column":55},"generated":{"line":1,"column":665}},{"source":"assets/js/scan.js","name":"intv","original":{"line":32,"column":12},"generated":{"line":1,"column":675}},{"source":"assets/js/scan.js","name":"setInterval","original":{"line":32,"column":19},"generated":{"line":1,"column":677}},{"source":"assets/js/scan.js","original":{"line":32,"column":31},"generated":{"line":1,"column":689}},{"source":"assets/js/scan.js","name":"barcodeCanvas","original":{"line":33,"column":14},"generated":{"line":1,"column":700}},{"source":"assets/js/scan.js","name":"width","original":{"line":33,"column":28},"generated":{"line":1,"column":702}},{"source":"assets/js/scan.js","name":"video","original":{"line":33,"column":36},"generated":{"line":1,"column":708}},{"source":"assets/js/scan.js","name":"videoWidth","original":{"line":33,"column":42},"generated":{"line":1,"column":710}},{"source":"assets/js/scan.js","name":"barcodeCanvas","original":{"line":34,"column":14},"generated":{"line":1,"column":721}},{"source":"assets/js/scan.js","name":"height","original":{"line":34,"column":28},"generated":{"line":1,"column":723}},{"source":"assets/js/scan.js","name":"video","original":{"line":34,"column":37},"generated":{"line":1,"column":730}},{"source":"assets/js/scan.js","name":"videoHeight","original":{"line":34,"column":43},"generated":{"line":1,"column":732}},{"source":"assets/js/scan.js","name":"barcodeContext","original":{"line":35,"column":18},"generated":{"line":1,"column":744}},{"source":"assets/js/scan.js","name":"barcodeContext","original":{"line":35,"column":18},"generated":{"line":1,"column":748}},{"source":"assets/js/scan.js","name":"barcodeCanvas","original":{"line":35,"column":35},"generated":{"line":1,"column":750}},{"source":"assets/js/scan.js","name":"getContext","original":{"line":35,"column":49},"generated":{"line":1,"column":752}},{"source":"assets/js/scan.js","original":{"line":35,"column":60},"generated":{"line":1,"column":763}},{"source":"assets/js/scan.js","name":"imageWidth","original":{"line":36,"column":18},"generated":{"line":1,"column":769}},{"source":"assets/js/scan.js","name":"Math","original":{"line":36,"column":31},"generated":{"line":1,"column":771}},{"source":"assets/js/scan.js","name":"max","original":{"line":36,"column":36},"generated":{"line":1,"column":776}},{"source":"assets/js/scan.js","original":{"line":36,"column":40},"generated":{"line":1,"column":780}},{"source":"assets/js/scan.js","name":"Math","original":{"line":36,"column":43},"generated":{"line":1,"column":782}},{"source":"assets/js/scan.js","name":"floor","original":{"line":36,"column":48},"generated":{"line":1,"column":787}},{"source":"assets/js/scan.js","name":"video","original":{"line":36,"column":54},"generated":{"line":1,"column":793}},{"source":"assets/js/scan.js","name":"videoWidth","original":{"line":36,"column":60},"generated":{"line":1,"column":795}},{"source":"assets/js/scan.js","name":"imageHeight","original":{"line":37,"column":16},"generated":{"line":1,"column":808}},{"source":"assets/js/scan.js","name":"Math","original":{"line":37,"column":30},"generated":{"line":1,"column":810}},{"source":"assets/js/scan.js","name":"max","original":{"line":37,"column":35},"generated":{"line":1,"column":815}},{"source":"assets/js/scan.js","original":{"line":37,"column":39},"generated":{"line":1,"column":819}},{"source":"assets/js/scan.js","name":"Math","original":{"line":37,"column":42},"generated":{"line":1,"column":821}},{"source":"assets/js/scan.js","name":"floor","original":{"line":37,"column":47},"generated":{"line":1,"column":826}},{"source":"assets/js/scan.js","name":"video","original":{"line":37,"column":53},"generated":{"line":1,"column":832}},{"source":"assets/js/scan.js","name":"videoHeight","original":{"line":37,"column":59},"generated":{"line":1,"column":834}},{"source":"assets/js/scan.js","name":"barcodeContext","original":{"line":39,"column":14},"generated":{"line":1,"column":848}},{"source":"assets/js/scan.js","name":"drawImage","original":{"line":39,"column":29},"generated":{"line":1,"column":850}},{"source":"assets/js/scan.js","name":"video","original":{"line":39,"column":39},"generated":{"line":1,"column":860}},{"source":"assets/js/scan.js","original":{"line":39,"column":46},"generated":{"line":1,"column":862}},{"source":"assets/js/scan.js","original":{"line":39,"column":49},"generated":{"line":1,"column":864}},{"source":"assets/js/scan.js","name":"imageWidth","original":{"line":39,"column":52},"generated":{"line":1,"column":866}},{"source":"assets/js/scan.js","name":"imageHeight","original":{"line":39,"column":64},"generated":{"line":1,"column":868}},{"source":"assets/js/scan.js","name":"imageData","original":{"line":41,"column":18},"generated":{"line":1,"column":871}},{"source":"assets/js/scan.js","name":"idd","original":{"line":47,"column":18},"generated":{"line":1,"column":875}},{"source":"assets/js/scan.js","name":"barcodeContext","original":{"line":41,"column":30},"generated":{"line":1,"column":877}},{"source":"assets/js/scan.js","name":"getImageData","original":{"line":41,"column":45},"generated":{"line":1,"column":879}},{"source":"assets/js/scan.js","original":{"line":42,"column":16},"generated":{"line":1,"column":892}},{"source":"assets/js/scan.js","original":{"line":43,"column":16},"generated":{"line":1,"column":894}},{"source":"assets/js/scan.js","name":"imageWidth","original":{"line":44,"column":16},"generated":{"line":1,"column":896}},{"source":"assets/js/scan.js","name":"imageHeight","original":{"line":45,"column":16},"generated":{"line":1,"column":898}},{"source":"assets/js/scan.js","name":"data","original":{"line":47,"column":34},"generated":{"line":1,"column":901}},{"source":"assets/js/scan.js","name":"code","original":{"line":49,"column":18},"generated":{"line":1,"column":906}},{"source":"assets/js/scan.js","name":"jsQR","original":{"line":49,"column":25},"generated":{"line":1,"column":908}},{"source":"assets/js/scan.js","name":"idd","original":{"line":49,"column":30},"generated":{"line":1,"column":913}},{"source":"assets/js/scan.js","name":"imageWidth","original":{"line":49,"column":35},"generated":{"line":1,"column":915}},{"source":"assets/js/scan.js","name":"imageHeight","original":{"line":49,"column":47},"generated":{"line":1,"column":917}},{"source":"assets/js/scan.js","name":"console","original":{"line":50,"column":14},"generated":{"line":1,"column":920}},{"source":"assets/js/scan.js","name":"log","original":{"line":50,"column":22},"generated":{"line":1,"column":928}},{"source":"assets/js/scan.js","name":"code","original":{"line":50,"column":26},"generated":{"line":1,"column":932}},{"source":"assets/js/scan.js","name":"code","original":{"line":52,"column":18},"generated":{"line":1,"column":935}},{"source":"assets/js/scan.js","name":"stop_scan","original":{"line":53,"column":16},"generated":{"line":1,"column":939}},{"source":"assets/js/scan.js","name":"callback","original":{"line":54,"column":16},"generated":{"line":1,"column":943}},{"source":"assets/js/scan.js","name":"code","original":{"line":54,"column":25},"generated":{"line":1,"column":945}},{"source":"assets/js/scan.js","name":"data","original":{"line":54,"column":30},"generated":{"line":1,"column":947}},{"source":"assets/js/scan.js","name":"status","original":{"line":55,"column":16},"generated":{"line":1,"column":953}},{"source":"assets/js/scan.js","name":"view","original":{"line":55,"column":23},"generated":{"line":1,"column":960}},{"source":"assets/js/scan.js","original":{"line":55,"column":30},"generated":{"line":1,"column":965}},{"source":"assets/js/scan.js","name":"clearInterval","original":{"line":56,"column":16},"generated":{"line":1,"column":980}},{"source":"assets/js/scan.js","name":"intv","original":{"line":56,"column":30},"generated":{"line":1,"column":994}},{"source":"assets/js/scan.js","original":{"line":58,"column":15},"generated":{"line":1,"column":999}},{"source":"assets/js/scan.js","original":{"line":61,"column":8},"generated":{"line":1,"column":1006}},{"source":"assets/js/scan.js","name":"err","original":{"line":61,"column":18},"generated":{"line":1,"column":1015}},{"source":"assets/js/scan.js","name":"console","original":{"line":62,"column":10},"generated":{"line":1,"column":1018}},{"source":"assets/js/scan.js","name":"log","original":{"line":62,"column":18},"generated":{"line":1,"column":1026}},{"source":"assets/js/scan.js","original":{"line":62,"column":22},"generated":{"line":1,"column":1030}},{"source":"assets/js/scan.js","name":"err","original":{"line":62,"column":57},"generated":{"line":1,"column":1063}},{"source":"assets/js/scan.js","name":"name","original":{"line":62,"column":61},"generated":{"line":1,"column":1065}},{"source":"assets/js/scan.js","name":"console","original":{"line":66,"column":6},"generated":{"line":1,"column":1073}},{"source":"assets/js/scan.js","name":"log","original":{"line":66,"column":14},"generated":{"line":1,"column":1081}},{"source":"assets/js/scan.js","original":{"line":66,"column":18},"generated":{"line":1,"column":1085}},{"source":"assets/js/scan.js","name":"stop_scan","original":{"line":87,"column":4},"generated":{"line":1,"column":1116}},{"source":"assets/js/scan.js","name":"stop_scan","original":{"line":87,"column":4},"generated":{"line":1,"column":1126}},{"source":"assets/js/scan.js","original":{"line":1,"column":12},"generated":{"line":1,"column":1129}}],"sources":{"assets/js/scan.js":"const qr = ((_) => {\n  let video;\n  let intv;\n  let start_scan = function (callback) {\n    status.view = \"scan\";\n    //helper.bottom_bar(\"\", \"\", \"\");\n\n    document.getElementById(\"qr-screen\").style.display = \"block\";\n\n    navigator.getUserMedia =\n      navigator.getUserMedia ||\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia;\n\n    if (navigator.getUserMedia) {\n      navigator.getUserMedia(\n        {\n          audio: false,\n          video: {\n            width: 200,\n            height: 200,\n          },\n        },\n        function (stream) {\n          video = document.querySelector(\"video\");\n          video.srcObject = stream;\n\n          video.onloadedmetadata = function (e) {\n            video.play();\n\n            var barcodeCanvas = document.createElement(\"canvas\");\n            intv = setInterval(() => {\n              barcodeCanvas.width = video.videoWidth;\n              barcodeCanvas.height = video.videoHeight;\n              var barcodeContext = barcodeCanvas.getContext(\"2d\");\n              var imageWidth = Math.max(1, Math.floor(video.videoWidth)),\n                imageHeight = Math.max(1, Math.floor(video.videoHeight));\n\n              barcodeContext.drawImage(video, 0, 0, imageWidth, imageHeight);\n\n              var imageData = barcodeContext.getImageData(\n                0,\n                0,\n                imageWidth,\n                imageHeight\n              );\n              var idd = imageData.data;\n\n              let code = jsQR(idd, imageWidth, imageHeight);\n              console.log(code);\n\n              if (code) {\n                stop_scan();\n                callback(code.data);\n                status.view = \"subscription\";\n                clearInterval(intv);\n              }\n            }, 1000);\n          };\n        },\n        function (err) {\n          console.log(\"The following error occurred: \" + err.name);\n        }\n      );\n    } else {\n      console.log(\"getUserMedia not supported\");\n    }\n  };\n\n  let stop_scan = function () {\n    const stream = video.srcObject;\n    const tracks = stream.getTracks();\n\n    tracks.forEach(function (track) {\n      track.stop();\n      document.getElementById(\"qr-screen\").style.display = \"none\";\n    });\n\n    video.srcObject = null;\n    status.views = \"subscription\";\n\n    helper.bottom_bar(\"QR\", \"save\", \"chancel\");\n  };\n\n  return {\n    start_scan,\n    stop_scan,\n  };\n})();\n"},"lineCount":null}},"error":null,"hash":"5ad846307487c6b52875ec9689187437","cacheData":{"env":{}}}