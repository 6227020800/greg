{"id":"assets/js/scan.js","dependencies":[{"name":"/home/strukturart/Desktop/Pages/greg/package.json","includedInParent":true,"mtime":1644931973019},{"name":"/assets/js/helper.js","loc":{"line":1,"column":27,"index":27},"parent":"/home/strukturart/Desktop/Pages/greg/application/assets/js/scan.js","resolved":"/home/strukturart/Desktop/Pages/greg/application/assets/js/helper.js"},{"name":"jsqr","loc":{"line":2,"column":17,"index":68},"parent":"/home/strukturart/Desktop/Pages/greg/application/assets/js/scan.js","resolved":"/home/strukturart/Desktop/Pages/greg/node_modules/jsqr/dist/jsQR.js"},{"name":"../../app.js","loc":{"line":3,"column":23,"index":99},"parent":"/home/strukturart/Desktop/Pages/greg/application/assets/js/scan.js","resolved":"/home/strukturart/Desktop/Pages/greg/application/app.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.stop_scan = exports.start_scan = void 0;\n\nvar _helper = require(\"/assets/js/helper.js\");\n\nvar _jsqr = _interopRequireDefault(require(\"jsqr\"));\n\nvar _app = require(\"../../app.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar video;\nvar intv;\n\nvar stop_scan = function stop_scan() {\n  // status.views = \"subscription\";\n  document.getElementById(\"qr-screen\").style.display = \"none\";\n  /*\n  const stream = video.srcObject;\n  const tracks = stream.getTracks();\n   tracks.forEach(function (track) {\n    track.stop();\n    document.getElementById(\"qr-screen\").style.display = \"none\";\n  });\n   video.srcObject = null;\n  */\n};\n\nexports.stop_scan = stop_scan;\n\nvar start_scan = function start_scan(callback) {\n  document.getElementById(\"qr-screen\").style.display = \"block\";\n  console.log(\"start\");\n  navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n  if (navigator.getUserMedia) {\n    navigator.getUserMedia({\n      audio: false,\n      video: {\n        width: 200,\n        height: 200\n      }\n    }, function (stream) {\n      video = document.querySelector(\"video\");\n      video.srcObject = stream;\n\n      video.onloadedmetadata = function (e) {\n        video.play();\n        var barcodeCanvas = document.createElement(\"canvas\");\n        intv = setInterval(function () {\n          barcodeCanvas.width = video.videoWidth;\n          barcodeCanvas.height = video.videoHeight;\n          var barcodeContext = barcodeCanvas.getContext(\"2d\");\n          var imageWidth = Math.max(1, Math.floor(video.videoWidth)),\n              imageHeight = Math.max(1, Math.floor(video.videoHeight));\n          barcodeContext.drawImage(video, 0, 0, imageWidth, imageHeight);\n          var imageData = barcodeContext.getImageData(0, 0, imageWidth, imageHeight);\n          var idd = imageData.data;\n          var code = (0, _jsqr.default)(idd, imageWidth, imageHeight);\n          console.log(code);\n\n          if (code) {\n            stop_scan();\n            callback(code.data);\n            clearInterval(intv);\n          }\n        }, 1000);\n      };\n    }, function (err) {\n      console.log(\"The following error occurred: \" + err.name);\n    });\n  } else {\n    console.log(\"getUserMedia not supported\");\n  }\n};\n\nexports.start_scan = start_scan;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":8,"column":0},"source":"assets/js/scan.js","original":{"line":1,"column":0}},{"generated":{"line":10,"column":0},"source":"assets/js/scan.js","original":{"line":2,"column":0}},{"generated":{"line":12,"column":0},"source":"assets/js/scan.js","original":{"line":3,"column":0}},{"generated":{"line":16,"column":0},"source":"assets/js/scan.js","original":{"line":5,"column":0}},{"name":"video","generated":{"line":16,"column":4},"source":"assets/js/scan.js","original":{"line":5,"column":4}},{"generated":{"line":16,"column":9},"source":"assets/js/scan.js","original":{"line":5,"column":0}},{"generated":{"line":17,"column":0},"source":"assets/js/scan.js","original":{"line":6,"column":0}},{"name":"intv","generated":{"line":17,"column":4},"source":"assets/js/scan.js","original":{"line":6,"column":4}},{"generated":{"line":17,"column":8},"source":"assets/js/scan.js","original":{"line":6,"column":0}},{"generated":{"line":19,"column":0},"source":"assets/js/scan.js","original":{"line":8,"column":7}},{"name":"stop_scan","generated":{"line":19,"column":4},"source":"assets/js/scan.js","original":{"line":8,"column":11}},{"generated":{"line":19,"column":13},"source":"assets/js/scan.js","original":{"line":8,"column":20}},{"generated":{"line":19,"column":16},"source":"assets/js/scan.js","original":{"line":8,"column":23}},{"name":"stop_scan","generated":{"line":19,"column":25},"source":"assets/js/scan.js","original":{"line":8,"column":11}},{"generated":{"line":19,"column":34},"source":"assets/js/scan.js","original":{"line":8,"column":23}},{"generated":{"line":19,"column":37},"source":"assets/js/scan.js","original":{"line":8,"column":35}},{"generated":{"line":20,"column":0},"source":"assets/js/scan.js","original":{"line":9,"column":2}},{"name":"document","generated":{"line":21,"column":0},"source":"assets/js/scan.js","original":{"line":11,"column":2}},{"name":"document","generated":{"line":21,"column":2},"source":"assets/js/scan.js","original":{"line":11,"column":2}},{"generated":{"line":21,"column":10},"source":"assets/js/scan.js","original":{"line":11,"column":10}},{"name":"getElementById","generated":{"line":21,"column":11},"source":"assets/js/scan.js","original":{"line":11,"column":11}},{"generated":{"line":21,"column":25},"source":"assets/js/scan.js","original":{"line":11,"column":2}},{"generated":{"line":21,"column":26},"source":"assets/js/scan.js","original":{"line":11,"column":26}},{"generated":{"line":21,"column":37},"source":"assets/js/scan.js","original":{"line":11,"column":2}},{"name":"style","generated":{"line":21,"column":39},"source":"assets/js/scan.js","original":{"line":11,"column":39}},{"generated":{"line":21,"column":44},"source":"assets/js/scan.js","original":{"line":11,"column":2}},{"name":"display","generated":{"line":21,"column":45},"source":"assets/js/scan.js","original":{"line":11,"column":45}},{"generated":{"line":21,"column":52},"source":"assets/js/scan.js","original":{"line":11,"column":2}},{"generated":{"line":21,"column":55},"source":"assets/js/scan.js","original":{"line":11,"column":55}},{"generated":{"line":21,"column":61},"source":"assets/js/scan.js","original":{"line":11,"column":2}},{"generated":{"line":22,"column":0},"source":"assets/js/scan.js","original":{"line":12,"column":2}},{"generated":{"line":23,"column":0},"source":"assets/js/scan.js","original":{"line":13,"column":0}},{"generated":{"line":24,"column":0},"source":"assets/js/scan.js","original":{"line":14,"column":0}},{"generated":{"line":25,"column":0},"source":"assets/js/scan.js","original":{"line":15,"column":0}},{"generated":{"line":26,"column":0},"source":"assets/js/scan.js","original":{"line":16,"column":0}},{"generated":{"line":27,"column":0},"source":"assets/js/scan.js","original":{"line":17,"column":0}},{"generated":{"line":28,"column":0},"source":"assets/js/scan.js","original":{"line":18,"column":0}},{"generated":{"line":29,"column":0},"source":"assets/js/scan.js","original":{"line":19,"column":0}},{"generated":{"line":30,"column":0},"source":"assets/js/scan.js","original":{"line":20,"column":0}},{"generated":{"line":31,"column":0},"source":"assets/js/scan.js","original":{"line":23,"column":1}},{"generated":{"line":31,"column":1},"source":"assets/js/scan.js","original":{"line":8,"column":7}},{"generated":{"line":35,"column":0},"source":"assets/js/scan.js","original":{"line":25,"column":7}},{"name":"start_scan","generated":{"line":35,"column":4},"source":"assets/js/scan.js","original":{"line":25,"column":11}},{"generated":{"line":35,"column":14},"source":"assets/js/scan.js","original":{"line":25,"column":21}},{"generated":{"line":35,"column":17},"source":"assets/js/scan.js","original":{"line":25,"column":24}},{"name":"start_scan","generated":{"line":35,"column":26},"source":"assets/js/scan.js","original":{"line":25,"column":11}},{"generated":{"line":35,"column":36},"source":"assets/js/scan.js","original":{"line":25,"column":24}},{"name":"callback","generated":{"line":35,"column":37},"source":"assets/js/scan.js","original":{"line":25,"column":34}},{"generated":{"line":35,"column":45},"source":"assets/js/scan.js","original":{"line":25,"column":24}},{"generated":{"line":35,"column":47},"source":"assets/js/scan.js","original":{"line":25,"column":44}},{"name":"document","generated":{"line":36,"column":0},"source":"assets/js/scan.js","original":{"line":26,"column":2}},{"name":"document","generated":{"line":36,"column":2},"source":"assets/js/scan.js","original":{"line":26,"column":2}},{"generated":{"line":36,"column":10},"source":"assets/js/scan.js","original":{"line":26,"column":10}},{"name":"getElementById","generated":{"line":36,"column":11},"source":"assets/js/scan.js","original":{"line":26,"column":11}},{"generated":{"line":36,"column":25},"source":"assets/js/scan.js","original":{"line":26,"column":2}},{"generated":{"line":36,"column":26},"source":"assets/js/scan.js","original":{"line":26,"column":26}},{"generated":{"line":36,"column":37},"source":"assets/js/scan.js","original":{"line":26,"column":2}},{"name":"style","generated":{"line":36,"column":39},"source":"assets/js/scan.js","original":{"line":26,"column":39}},{"generated":{"line":36,"column":44},"source":"assets/js/scan.js","original":{"line":26,"column":2}},{"name":"display","generated":{"line":36,"column":45},"source":"assets/js/scan.js","original":{"line":26,"column":45}},{"generated":{"line":36,"column":52},"source":"assets/js/scan.js","original":{"line":26,"column":2}},{"generated":{"line":36,"column":55},"source":"assets/js/scan.js","original":{"line":26,"column":55}},{"generated":{"line":36,"column":62},"source":"assets/js/scan.js","original":{"line":26,"column":2}},{"name":"console","generated":{"line":37,"column":0},"source":"assets/js/scan.js","original":{"line":27,"column":2}},{"name":"console","generated":{"line":37,"column":2},"source":"assets/js/scan.js","original":{"line":27,"column":2}},{"generated":{"line":37,"column":9},"source":"assets/js/scan.js","original":{"line":27,"column":9}},{"name":"log","generated":{"line":37,"column":10},"source":"assets/js/scan.js","original":{"line":27,"column":10}},{"generated":{"line":37,"column":13},"source":"assets/js/scan.js","original":{"line":27,"column":2}},{"generated":{"line":37,"column":14},"source":"assets/js/scan.js","original":{"line":27,"column":14}},{"generated":{"line":37,"column":21},"source":"assets/js/scan.js","original":{"line":27,"column":2}},{"name":"navigator","generated":{"line":38,"column":0},"source":"assets/js/scan.js","original":{"line":29,"column":2}},{"name":"navigator","generated":{"line":38,"column":2},"source":"assets/js/scan.js","original":{"line":29,"column":2}},{"generated":{"line":38,"column":11},"source":"assets/js/scan.js","original":{"line":29,"column":11}},{"name":"getUserMedia","generated":{"line":38,"column":12},"source":"assets/js/scan.js","original":{"line":29,"column":12}},{"generated":{"line":38,"column":24},"source":"assets/js/scan.js","original":{"line":29,"column":2}},{"name":"navigator","generated":{"line":38,"column":27},"source":"assets/js/scan.js","original":{"line":30,"column":4}},{"generated":{"line":38,"column":36},"source":"assets/js/scan.js","original":{"line":30,"column":13}},{"name":"getUserMedia","generated":{"line":38,"column":37},"source":"assets/js/scan.js","original":{"line":30,"column":14}},{"generated":{"line":38,"column":49},"source":"assets/js/scan.js","original":{"line":30,"column":4}},{"name":"navigator","generated":{"line":38,"column":53},"source":"assets/js/scan.js","original":{"line":31,"column":4}},{"generated":{"line":38,"column":62},"source":"assets/js/scan.js","original":{"line":31,"column":13}},{"name":"webkitGetUserMedia","generated":{"line":38,"column":63},"source":"assets/js/scan.js","original":{"line":31,"column":14}},{"generated":{"line":38,"column":81},"source":"assets/js/scan.js","original":{"line":30,"column":4}},{"name":"navigator","generated":{"line":38,"column":85},"source":"assets/js/scan.js","original":{"line":32,"column":4}},{"generated":{"line":38,"column":94},"source":"assets/js/scan.js","original":{"line":32,"column":13}},{"name":"mozGetUserMedia","generated":{"line":38,"column":95},"source":"assets/js/scan.js","original":{"line":32,"column":14}},{"generated":{"line":38,"column":110},"source":"assets/js/scan.js","original":{"line":29,"column":2}},{"generated":{"line":40,"column":0},"source":"assets/js/scan.js","original":{"line":34,"column":2}},{"name":"navigator","generated":{"line":40,"column":6},"source":"assets/js/scan.js","original":{"line":34,"column":6}},{"generated":{"line":40,"column":15},"source":"assets/js/scan.js","original":{"line":34,"column":15}},{"name":"getUserMedia","generated":{"line":40,"column":16},"source":"assets/js/scan.js","original":{"line":34,"column":16}},{"generated":{"line":40,"column":28},"source":"assets/js/scan.js","original":{"line":34,"column":2}},{"generated":{"line":40,"column":30},"source":"assets/js/scan.js","original":{"line":34,"column":30}},{"name":"navigator","generated":{"line":41,"column":0},"source":"assets/js/scan.js","original":{"line":35,"column":4}},{"name":"navigator","generated":{"line":41,"column":4},"source":"assets/js/scan.js","original":{"line":35,"column":4}},{"generated":{"line":41,"column":13},"source":"assets/js/scan.js","original":{"line":35,"column":13}},{"name":"getUserMedia","generated":{"line":41,"column":14},"source":"assets/js/scan.js","original":{"line":35,"column":14}},{"generated":{"line":41,"column":26},"source":"assets/js/scan.js","original":{"line":35,"column":4}},{"generated":{"line":41,"column":27},"source":"assets/js/scan.js","original":{"line":36,"column":6}},{"name":"audio","generated":{"line":42,"column":0},"source":"assets/js/scan.js","original":{"line":37,"column":8}},{"name":"audio","generated":{"line":42,"column":6},"source":"assets/js/scan.js","original":{"line":37,"column":8}},{"generated":{"line":42,"column":11},"source":"assets/js/scan.js","original":{"line":37,"column":13}},{"generated":{"line":42,"column":13},"source":"assets/js/scan.js","original":{"line":37,"column":15}},{"generated":{"line":42,"column":18},"source":"assets/js/scan.js","original":{"line":36,"column":6}},{"name":"video","generated":{"line":43,"column":0},"source":"assets/js/scan.js","original":{"line":38,"column":8}},{"name":"video","generated":{"line":43,"column":6},"source":"assets/js/scan.js","original":{"line":38,"column":8}},{"generated":{"line":43,"column":11},"source":"assets/js/scan.js","original":{"line":38,"column":13}},{"generated":{"line":43,"column":13},"source":"assets/js/scan.js","original":{"line":38,"column":15}},{"name":"width","generated":{"line":44,"column":0},"source":"assets/js/scan.js","original":{"line":39,"column":10}},{"name":"width","generated":{"line":44,"column":8},"source":"assets/js/scan.js","original":{"line":39,"column":10}},{"generated":{"line":44,"column":13},"source":"assets/js/scan.js","original":{"line":39,"column":15}},{"generated":{"line":44,"column":15},"source":"assets/js/scan.js","original":{"line":39,"column":17}},{"generated":{"line":44,"column":18},"source":"assets/js/scan.js","original":{"line":38,"column":15}},{"name":"height","generated":{"line":45,"column":0},"source":"assets/js/scan.js","original":{"line":40,"column":10}},{"name":"height","generated":{"line":45,"column":8},"source":"assets/js/scan.js","original":{"line":40,"column":10}},{"generated":{"line":45,"column":14},"source":"assets/js/scan.js","original":{"line":40,"column":16}},{"generated":{"line":45,"column":16},"source":"assets/js/scan.js","original":{"line":40,"column":18}},{"generated":{"line":46,"column":0},"source":"assets/js/scan.js","original":{"line":38,"column":15}},{"generated":{"line":47,"column":0},"source":"assets/js/scan.js","original":{"line":36,"column":6}},{"generated":{"line":47,"column":5},"source":"assets/js/scan.js","original":{"line":35,"column":4}},{"generated":{"line":47,"column":7},"source":"assets/js/scan.js","original":{"line":43,"column":6}},{"name":"stream","generated":{"line":47,"column":17},"source":"assets/js/scan.js","original":{"line":43,"column":16}},{"generated":{"line":47,"column":23},"source":"assets/js/scan.js","original":{"line":43,"column":6}},{"generated":{"line":47,"column":25},"source":"assets/js/scan.js","original":{"line":43,"column":24}},{"name":"video","generated":{"line":48,"column":0},"source":"assets/js/scan.js","original":{"line":44,"column":8}},{"name":"video","generated":{"line":48,"column":6},"source":"assets/js/scan.js","original":{"line":44,"column":8}},{"generated":{"line":48,"column":11},"source":"assets/js/scan.js","original":{"line":44,"column":13}},{"name":"document","generated":{"line":48,"column":14},"source":"assets/js/scan.js","original":{"line":44,"column":16}},{"generated":{"line":48,"column":22},"source":"assets/js/scan.js","original":{"line":44,"column":24}},{"name":"querySelector","generated":{"line":48,"column":23},"source":"assets/js/scan.js","original":{"line":44,"column":25}},{"generated":{"line":48,"column":36},"source":"assets/js/scan.js","original":{"line":44,"column":16}},{"generated":{"line":48,"column":37},"source":"assets/js/scan.js","original":{"line":44,"column":39}},{"generated":{"line":48,"column":44},"source":"assets/js/scan.js","original":{"line":44,"column":16}},{"generated":{"line":48,"column":45},"source":"assets/js/scan.js","original":{"line":44,"column":8}},{"name":"video","generated":{"line":49,"column":0},"source":"assets/js/scan.js","original":{"line":45,"column":8}},{"name":"video","generated":{"line":49,"column":6},"source":"assets/js/scan.js","original":{"line":45,"column":8}},{"generated":{"line":49,"column":11},"source":"assets/js/scan.js","original":{"line":45,"column":13}},{"name":"srcObject","generated":{"line":49,"column":12},"source":"assets/js/scan.js","original":{"line":45,"column":14}},{"generated":{"line":49,"column":21},"source":"assets/js/scan.js","original":{"line":45,"column":8}},{"name":"stream","generated":{"line":49,"column":24},"source":"assets/js/scan.js","original":{"line":45,"column":26}},{"generated":{"line":49,"column":30},"source":"assets/js/scan.js","original":{"line":45,"column":8}},{"name":"video","generated":{"line":51,"column":0},"source":"assets/js/scan.js","original":{"line":47,"column":8}},{"name":"video","generated":{"line":51,"column":6},"source":"assets/js/scan.js","original":{"line":47,"column":8}},{"generated":{"line":51,"column":11},"source":"assets/js/scan.js","original":{"line":47,"column":13}},{"name":"onloadedmetadata","generated":{"line":51,"column":12},"source":"assets/js/scan.js","original":{"line":47,"column":14}},{"generated":{"line":51,"column":28},"source":"assets/js/scan.js","original":{"line":47,"column":8}},{"generated":{"line":51,"column":31},"source":"assets/js/scan.js","original":{"line":47,"column":33}},{"name":"e","generated":{"line":51,"column":41},"source":"assets/js/scan.js","original":{"line":47,"column":43}},{"generated":{"line":51,"column":42},"source":"assets/js/scan.js","original":{"line":47,"column":33}},{"generated":{"line":51,"column":44},"source":"assets/js/scan.js","original":{"line":47,"column":46}},{"name":"video","generated":{"line":52,"column":0},"source":"assets/js/scan.js","original":{"line":48,"column":10}},{"name":"video","generated":{"line":52,"column":8},"source":"assets/js/scan.js","original":{"line":48,"column":10}},{"generated":{"line":52,"column":13},"source":"assets/js/scan.js","original":{"line":48,"column":15}},{"name":"play","generated":{"line":52,"column":14},"source":"assets/js/scan.js","original":{"line":48,"column":16}},{"generated":{"line":52,"column":18},"source":"assets/js/scan.js","original":{"line":48,"column":10}},{"generated":{"line":53,"column":0},"source":"assets/js/scan.js","original":{"line":50,"column":10}},{"name":"barcodeCanvas","generated":{"line":53,"column":12},"source":"assets/js/scan.js","original":{"line":50,"column":14}},{"generated":{"line":53,"column":25},"source":"assets/js/scan.js","original":{"line":50,"column":27}},{"name":"document","generated":{"line":53,"column":28},"source":"assets/js/scan.js","original":{"line":50,"column":30}},{"generated":{"line":53,"column":36},"source":"assets/js/scan.js","original":{"line":50,"column":38}},{"name":"createElement","generated":{"line":53,"column":37},"source":"assets/js/scan.js","original":{"line":50,"column":39}},{"generated":{"line":53,"column":50},"source":"assets/js/scan.js","original":{"line":50,"column":30}},{"generated":{"line":53,"column":51},"source":"assets/js/scan.js","original":{"line":50,"column":53}},{"generated":{"line":53,"column":59},"source":"assets/js/scan.js","original":{"line":50,"column":30}},{"generated":{"line":53,"column":60},"source":"assets/js/scan.js","original":{"line":50,"column":10}},{"name":"intv","generated":{"line":54,"column":0},"source":"assets/js/scan.js","original":{"line":51,"column":10}},{"name":"intv","generated":{"line":54,"column":8},"source":"assets/js/scan.js","original":{"line":51,"column":10}},{"generated":{"line":54,"column":12},"source":"assets/js/scan.js","original":{"line":51,"column":14}},{"name":"setInterval","generated":{"line":54,"column":15},"source":"assets/js/scan.js","original":{"line":51,"column":17}},{"generated":{"line":54,"column":26},"source":"assets/js/scan.js","original":{"line":51,"column":28}},{"generated":{"line":54,"column":27},"source":"assets/js/scan.js","original":{"line":51,"column":29}},{"generated":{"line":54,"column":39},"source":"assets/js/scan.js","original":{"line":51,"column":35}},{"name":"barcodeCanvas","generated":{"line":55,"column":0},"source":"assets/js/scan.js","original":{"line":52,"column":12}},{"name":"barcodeCanvas","generated":{"line":55,"column":10},"source":"assets/js/scan.js","original":{"line":52,"column":12}},{"generated":{"line":55,"column":23},"source":"assets/js/scan.js","original":{"line":52,"column":25}},{"name":"width","generated":{"line":55,"column":24},"source":"assets/js/scan.js","original":{"line":52,"column":26}},{"generated":{"line":55,"column":29},"source":"assets/js/scan.js","original":{"line":52,"column":12}},{"name":"video","generated":{"line":55,"column":32},"source":"assets/js/scan.js","original":{"line":52,"column":34}},{"generated":{"line":55,"column":37},"source":"assets/js/scan.js","original":{"line":52,"column":39}},{"name":"videoWidth","generated":{"line":55,"column":38},"source":"assets/js/scan.js","original":{"line":52,"column":40}},{"generated":{"line":55,"column":48},"source":"assets/js/scan.js","original":{"line":52,"column":12}},{"name":"barcodeCanvas","generated":{"line":56,"column":0},"source":"assets/js/scan.js","original":{"line":53,"column":12}},{"name":"barcodeCanvas","generated":{"line":56,"column":10},"source":"assets/js/scan.js","original":{"line":53,"column":12}},{"generated":{"line":56,"column":23},"source":"assets/js/scan.js","original":{"line":53,"column":25}},{"name":"height","generated":{"line":56,"column":24},"source":"assets/js/scan.js","original":{"line":53,"column":26}},{"generated":{"line":56,"column":30},"source":"assets/js/scan.js","original":{"line":53,"column":12}},{"name":"video","generated":{"line":56,"column":33},"source":"assets/js/scan.js","original":{"line":53,"column":35}},{"generated":{"line":56,"column":38},"source":"assets/js/scan.js","original":{"line":53,"column":40}},{"name":"videoHeight","generated":{"line":56,"column":39},"source":"assets/js/scan.js","original":{"line":53,"column":41}},{"generated":{"line":56,"column":50},"source":"assets/js/scan.js","original":{"line":53,"column":12}},{"generated":{"line":57,"column":0},"source":"assets/js/scan.js","original":{"line":54,"column":12}},{"name":"barcodeContext","generated":{"line":57,"column":14},"source":"assets/js/scan.js","original":{"line":54,"column":16}},{"generated":{"line":57,"column":28},"source":"assets/js/scan.js","original":{"line":54,"column":30}},{"name":"barcodeCanvas","generated":{"line":57,"column":31},"source":"assets/js/scan.js","original":{"line":54,"column":33}},{"generated":{"line":57,"column":44},"source":"assets/js/scan.js","original":{"line":54,"column":46}},{"name":"getContext","generated":{"line":57,"column":45},"source":"assets/js/scan.js","original":{"line":54,"column":47}},{"generated":{"line":57,"column":55},"source":"assets/js/scan.js","original":{"line":54,"column":33}},{"generated":{"line":57,"column":56},"source":"assets/js/scan.js","original":{"line":54,"column":58}},{"generated":{"line":57,"column":60},"source":"assets/js/scan.js","original":{"line":54,"column":33}},{"generated":{"line":57,"column":61},"source":"assets/js/scan.js","original":{"line":54,"column":12}},{"generated":{"line":58,"column":0},"source":"assets/js/scan.js","original":{"line":55,"column":12}},{"name":"imageWidth","generated":{"line":58,"column":14},"source":"assets/js/scan.js","original":{"line":55,"column":16}},{"generated":{"line":58,"column":24},"source":"assets/js/scan.js","original":{"line":55,"column":26}},{"name":"Math","generated":{"line":58,"column":27},"source":"assets/js/scan.js","original":{"line":55,"column":29}},{"generated":{"line":58,"column":31},"source":"assets/js/scan.js","original":{"line":55,"column":33}},{"name":"max","generated":{"line":58,"column":32},"source":"assets/js/scan.js","original":{"line":55,"column":34}},{"generated":{"line":58,"column":35},"source":"assets/js/scan.js","original":{"line":55,"column":29}},{"generated":{"line":58,"column":36},"source":"assets/js/scan.js","original":{"line":55,"column":38}},{"generated":{"line":58,"column":37},"source":"assets/js/scan.js","original":{"line":55,"column":29}},{"name":"Math","generated":{"line":58,"column":39},"source":"assets/js/scan.js","original":{"line":55,"column":41}},{"generated":{"line":58,"column":43},"source":"assets/js/scan.js","original":{"line":55,"column":45}},{"name":"floor","generated":{"line":58,"column":44},"source":"assets/js/scan.js","original":{"line":55,"column":46}},{"generated":{"line":58,"column":49},"source":"assets/js/scan.js","original":{"line":55,"column":41}},{"name":"video","generated":{"line":58,"column":50},"source":"assets/js/scan.js","original":{"line":55,"column":52}},{"generated":{"line":58,"column":55},"source":"assets/js/scan.js","original":{"line":55,"column":57}},{"name":"videoWidth","generated":{"line":58,"column":56},"source":"assets/js/scan.js","original":{"line":55,"column":58}},{"generated":{"line":58,"column":66},"source":"assets/js/scan.js","original":{"line":55,"column":41}},{"generated":{"line":58,"column":67},"source":"assets/js/scan.js","original":{"line":55,"column":29}},{"generated":{"line":58,"column":68},"source":"assets/js/scan.js","original":{"line":55,"column":12}},{"generated":{"line":59,"column":0},"source":"assets/js/scan.js","original":{"line":55,"column":12}},{"name":"imageHeight","generated":{"line":59,"column":14},"source":"assets/js/scan.js","original":{"line":56,"column":14}},{"generated":{"line":59,"column":25},"source":"assets/js/scan.js","original":{"line":56,"column":25}},{"name":"Math","generated":{"line":59,"column":28},"source":"assets/js/scan.js","original":{"line":56,"column":28}},{"generated":{"line":59,"column":32},"source":"assets/js/scan.js","original":{"line":56,"column":32}},{"name":"max","generated":{"line":59,"column":33},"source":"assets/js/scan.js","original":{"line":56,"column":33}},{"generated":{"line":59,"column":36},"source":"assets/js/scan.js","original":{"line":56,"column":28}},{"generated":{"line":59,"column":37},"source":"assets/js/scan.js","original":{"line":56,"column":37}},{"generated":{"line":59,"column":38},"source":"assets/js/scan.js","original":{"line":56,"column":28}},{"name":"Math","generated":{"line":59,"column":40},"source":"assets/js/scan.js","original":{"line":56,"column":40}},{"generated":{"line":59,"column":44},"source":"assets/js/scan.js","original":{"line":56,"column":44}},{"name":"floor","generated":{"line":59,"column":45},"source":"assets/js/scan.js","original":{"line":56,"column":45}},{"generated":{"line":59,"column":50},"source":"assets/js/scan.js","original":{"line":56,"column":40}},{"name":"video","generated":{"line":59,"column":51},"source":"assets/js/scan.js","original":{"line":56,"column":51}},{"generated":{"line":59,"column":56},"source":"assets/js/scan.js","original":{"line":56,"column":56}},{"name":"videoHeight","generated":{"line":59,"column":57},"source":"assets/js/scan.js","original":{"line":56,"column":57}},{"generated":{"line":59,"column":68},"source":"assets/js/scan.js","original":{"line":56,"column":40}},{"generated":{"line":59,"column":69},"source":"assets/js/scan.js","original":{"line":56,"column":28}},{"generated":{"line":59,"column":70},"source":"assets/js/scan.js","original":{"line":55,"column":12}},{"name":"barcodeContext","generated":{"line":60,"column":0},"source":"assets/js/scan.js","original":{"line":58,"column":12}},{"name":"barcodeContext","generated":{"line":60,"column":10},"source":"assets/js/scan.js","original":{"line":58,"column":12}},{"generated":{"line":60,"column":24},"source":"assets/js/scan.js","original":{"line":58,"column":26}},{"name":"drawImage","generated":{"line":60,"column":25},"source":"assets/js/scan.js","original":{"line":58,"column":27}},{"generated":{"line":60,"column":34},"source":"assets/js/scan.js","original":{"line":58,"column":12}},{"name":"video","generated":{"line":60,"column":35},"source":"assets/js/scan.js","original":{"line":58,"column":37}},{"generated":{"line":60,"column":40},"source":"assets/js/scan.js","original":{"line":58,"column":12}},{"generated":{"line":60,"column":42},"source":"assets/js/scan.js","original":{"line":58,"column":44}},{"generated":{"line":60,"column":43},"source":"assets/js/scan.js","original":{"line":58,"column":12}},{"generated":{"line":60,"column":45},"source":"assets/js/scan.js","original":{"line":58,"column":47}},{"generated":{"line":60,"column":46},"source":"assets/js/scan.js","original":{"line":58,"column":12}},{"name":"imageWidth","generated":{"line":60,"column":48},"source":"assets/js/scan.js","original":{"line":58,"column":50}},{"generated":{"line":60,"column":58},"source":"assets/js/scan.js","original":{"line":58,"column":12}},{"name":"imageHeight","generated":{"line":60,"column":60},"source":"assets/js/scan.js","original":{"line":58,"column":62}},{"generated":{"line":60,"column":71},"source":"assets/js/scan.js","original":{"line":58,"column":12}},{"generated":{"line":61,"column":0},"source":"assets/js/scan.js","original":{"line":60,"column":12}},{"name":"imageData","generated":{"line":61,"column":14},"source":"assets/js/scan.js","original":{"line":60,"column":16}},{"generated":{"line":61,"column":23},"source":"assets/js/scan.js","original":{"line":60,"column":25}},{"name":"barcodeContext","generated":{"line":61,"column":26},"source":"assets/js/scan.js","original":{"line":60,"column":28}},{"generated":{"line":61,"column":40},"source":"assets/js/scan.js","original":{"line":60,"column":42}},{"name":"getImageData","generated":{"line":61,"column":41},"source":"assets/js/scan.js","original":{"line":60,"column":43}},{"generated":{"line":61,"column":53},"source":"assets/js/scan.js","original":{"line":60,"column":28}},{"generated":{"line":61,"column":54},"source":"assets/js/scan.js","original":{"line":61,"column":14}},{"generated":{"line":61,"column":55},"source":"assets/js/scan.js","original":{"line":60,"column":28}},{"generated":{"line":61,"column":57},"source":"assets/js/scan.js","original":{"line":62,"column":14}},{"generated":{"line":61,"column":58},"source":"assets/js/scan.js","original":{"line":60,"column":28}},{"name":"imageWidth","generated":{"line":61,"column":60},"source":"assets/js/scan.js","original":{"line":63,"column":14}},{"generated":{"line":61,"column":70},"source":"assets/js/scan.js","original":{"line":60,"column":28}},{"name":"imageHeight","generated":{"line":61,"column":72},"source":"assets/js/scan.js","original":{"line":64,"column":14}},{"generated":{"line":61,"column":83},"source":"assets/js/scan.js","original":{"line":60,"column":28}},{"generated":{"line":61,"column":84},"source":"assets/js/scan.js","original":{"line":60,"column":12}},{"generated":{"line":62,"column":0},"source":"assets/js/scan.js","original":{"line":66,"column":12}},{"name":"idd","generated":{"line":62,"column":14},"source":"assets/js/scan.js","original":{"line":66,"column":16}},{"generated":{"line":62,"column":17},"source":"assets/js/scan.js","original":{"line":66,"column":19}},{"name":"imageData","generated":{"line":62,"column":20},"source":"assets/js/scan.js","original":{"line":66,"column":22}},{"generated":{"line":62,"column":29},"source":"assets/js/scan.js","original":{"line":66,"column":31}},{"name":"data","generated":{"line":62,"column":30},"source":"assets/js/scan.js","original":{"line":66,"column":32}},{"generated":{"line":62,"column":34},"source":"assets/js/scan.js","original":{"line":66,"column":12}},{"generated":{"line":63,"column":0},"source":"assets/js/scan.js","original":{"line":68,"column":12}},{"name":"code","generated":{"line":63,"column":14},"source":"assets/js/scan.js","original":{"line":68,"column":16}},{"generated":{"line":63,"column":18},"source":"assets/js/scan.js","original":{"line":68,"column":20}},{"generated":{"line":63,"column":21},"source":"assets/js/scan.js","original":{"line":68,"column":23}},{"name":"idd","generated":{"line":63,"column":40},"source":"assets/js/scan.js","original":{"line":68,"column":28}},{"generated":{"line":63,"column":43},"source":"assets/js/scan.js","original":{"line":68,"column":23}},{"name":"imageWidth","generated":{"line":63,"column":45},"source":"assets/js/scan.js","original":{"line":68,"column":33}},{"generated":{"line":63,"column":55},"source":"assets/js/scan.js","original":{"line":68,"column":23}},{"name":"imageHeight","generated":{"line":63,"column":57},"source":"assets/js/scan.js","original":{"line":68,"column":45}},{"generated":{"line":63,"column":68},"source":"assets/js/scan.js","original":{"line":68,"column":23}},{"generated":{"line":63,"column":69},"source":"assets/js/scan.js","original":{"line":68,"column":12}},{"name":"console","generated":{"line":64,"column":0},"source":"assets/js/scan.js","original":{"line":69,"column":12}},{"name":"console","generated":{"line":64,"column":10},"source":"assets/js/scan.js","original":{"line":69,"column":12}},{"generated":{"line":64,"column":17},"source":"assets/js/scan.js","original":{"line":69,"column":19}},{"name":"log","generated":{"line":64,"column":18},"source":"assets/js/scan.js","original":{"line":69,"column":20}},{"generated":{"line":64,"column":21},"source":"assets/js/scan.js","original":{"line":69,"column":12}},{"name":"code","generated":{"line":64,"column":22},"source":"assets/js/scan.js","original":{"line":69,"column":24}},{"generated":{"line":64,"column":26},"source":"assets/js/scan.js","original":{"line":69,"column":12}},{"generated":{"line":66,"column":0},"source":"assets/js/scan.js","original":{"line":71,"column":12}},{"name":"code","generated":{"line":66,"column":14},"source":"assets/js/scan.js","original":{"line":71,"column":16}},{"generated":{"line":66,"column":18},"source":"assets/js/scan.js","original":{"line":71,"column":12}},{"generated":{"line":66,"column":20},"source":"assets/js/scan.js","original":{"line":71,"column":22}},{"name":"stop_scan","generated":{"line":67,"column":0},"source":"assets/js/scan.js","original":{"line":72,"column":14}},{"name":"stop_scan","generated":{"line":67,"column":12},"source":"assets/js/scan.js","original":{"line":72,"column":14}},{"generated":{"line":67,"column":21},"source":"assets/js/scan.js","original":{"line":72,"column":23}},{"name":"callback","generated":{"line":68,"column":0},"source":"assets/js/scan.js","original":{"line":73,"column":14}},{"name":"callback","generated":{"line":68,"column":12},"source":"assets/js/scan.js","original":{"line":73,"column":14}},{"generated":{"line":68,"column":20},"source":"assets/js/scan.js","original":{"line":73,"column":22}},{"name":"code","generated":{"line":68,"column":21},"source":"assets/js/scan.js","original":{"line":73,"column":23}},{"generated":{"line":68,"column":25},"source":"assets/js/scan.js","original":{"line":73,"column":27}},{"name":"data","generated":{"line":68,"column":26},"source":"assets/js/scan.js","original":{"line":73,"column":28}},{"generated":{"line":68,"column":30},"source":"assets/js/scan.js","original":{"line":73,"column":22}},{"generated":{"line":68,"column":31},"source":"assets/js/scan.js","original":{"line":73,"column":14}},{"name":"clearInterval","generated":{"line":69,"column":0},"source":"assets/js/scan.js","original":{"line":74,"column":14}},{"name":"clearInterval","generated":{"line":69,"column":12},"source":"assets/js/scan.js","original":{"line":74,"column":14}},{"generated":{"line":69,"column":25},"source":"assets/js/scan.js","original":{"line":74,"column":27}},{"name":"intv","generated":{"line":69,"column":26},"source":"assets/js/scan.js","original":{"line":74,"column":28}},{"generated":{"line":69,"column":30},"source":"assets/js/scan.js","original":{"line":74,"column":27}},{"generated":{"line":69,"column":31},"source":"assets/js/scan.js","original":{"line":74,"column":14}},{"generated":{"line":70,"column":0},"source":"assets/js/scan.js","original":{"line":75,"column":13}},{"generated":{"line":71,"column":0},"source":"assets/js/scan.js","original":{"line":76,"column":11}},{"generated":{"line":71,"column":9},"source":"assets/js/scan.js","original":{"line":51,"column":28}},{"generated":{"line":71,"column":11},"source":"assets/js/scan.js","original":{"line":76,"column":13}},{"generated":{"line":71,"column":15},"source":"assets/js/scan.js","original":{"line":51,"column":28}},{"generated":{"line":71,"column":16},"source":"assets/js/scan.js","original":{"line":51,"column":10}},{"generated":{"line":72,"column":0},"source":"assets/js/scan.js","original":{"line":77,"column":9}},{"generated":{"line":72,"column":7},"source":"assets/js/scan.js","original":{"line":47,"column":8}},{"generated":{"line":73,"column":0},"source":"assets/js/scan.js","original":{"line":78,"column":7}},{"generated":{"line":73,"column":5},"source":"assets/js/scan.js","original":{"line":35,"column":4}},{"generated":{"line":73,"column":7},"source":"assets/js/scan.js","original":{"line":79,"column":6}},{"name":"err","generated":{"line":73,"column":17},"source":"assets/js/scan.js","original":{"line":79,"column":16}},{"generated":{"line":73,"column":20},"source":"assets/js/scan.js","original":{"line":79,"column":6}},{"generated":{"line":73,"column":22},"source":"assets/js/scan.js","original":{"line":79,"column":21}},{"name":"console","generated":{"line":74,"column":0},"source":"assets/js/scan.js","original":{"line":80,"column":8}},{"name":"console","generated":{"line":74,"column":6},"source":"assets/js/scan.js","original":{"line":80,"column":8}},{"generated":{"line":74,"column":13},"source":"assets/js/scan.js","original":{"line":80,"column":15}},{"name":"log","generated":{"line":74,"column":14},"source":"assets/js/scan.js","original":{"line":80,"column":16}},{"generated":{"line":74,"column":17},"source":"assets/js/scan.js","original":{"line":80,"column":8}},{"generated":{"line":74,"column":18},"source":"assets/js/scan.js","original":{"line":80,"column":20}},{"name":"err","generated":{"line":74,"column":53},"source":"assets/js/scan.js","original":{"line":80,"column":55}},{"generated":{"line":74,"column":56},"source":"assets/js/scan.js","original":{"line":80,"column":58}},{"name":"name","generated":{"line":74,"column":57},"source":"assets/js/scan.js","original":{"line":80,"column":59}},{"generated":{"line":74,"column":61},"source":"assets/js/scan.js","original":{"line":80,"column":8}},{"generated":{"line":75,"column":0},"source":"assets/js/scan.js","original":{"line":81,"column":7}},{"generated":{"line":75,"column":5},"source":"assets/js/scan.js","original":{"line":35,"column":4}},{"generated":{"line":76,"column":0},"source":"assets/js/scan.js","original":{"line":83,"column":3}},{"generated":{"line":76,"column":3},"source":"assets/js/scan.js","original":{"line":34,"column":2}},{"generated":{"line":76,"column":9},"source":"assets/js/scan.js","original":{"line":83,"column":9}},{"name":"console","generated":{"line":77,"column":0},"source":"assets/js/scan.js","original":{"line":84,"column":4}},{"name":"console","generated":{"line":77,"column":4},"source":"assets/js/scan.js","original":{"line":84,"column":4}},{"generated":{"line":77,"column":11},"source":"assets/js/scan.js","original":{"line":84,"column":11}},{"name":"log","generated":{"line":77,"column":12},"source":"assets/js/scan.js","original":{"line":84,"column":12}},{"generated":{"line":77,"column":15},"source":"assets/js/scan.js","original":{"line":84,"column":4}},{"generated":{"line":77,"column":16},"source":"assets/js/scan.js","original":{"line":84,"column":16}},{"generated":{"line":77,"column":44},"source":"assets/js/scan.js","original":{"line":84,"column":4}},{"generated":{"line":78,"column":0},"source":"assets/js/scan.js","original":{"line":85,"column":3}},{"generated":{"line":79,"column":0},"source":"assets/js/scan.js","original":{"line":86,"column":1}},{"generated":{"line":79,"column":1},"source":"assets/js/scan.js","original":{"line":25,"column":7}}],"sources":{"assets/js/scan.js":"import { bottom_bar } from \"/assets/js/helper.js\";\nimport jsQR from \"jsqr\";\nimport { status } from \"../../app.js\";\n\nlet video;\nlet intv;\n\nexport let stop_scan = function () {\n  // status.views = \"subscription\";\n\n  document.getElementById(\"qr-screen\").style.display = \"none\";\n  /*\n  const stream = video.srcObject;\n  const tracks = stream.getTracks();\n\n  tracks.forEach(function (track) {\n    track.stop();\n    document.getElementById(\"qr-screen\").style.display = \"none\";\n  });\n\n  video.srcObject = null;\n  */\n};\n\nexport let start_scan = function (callback) {\n  document.getElementById(\"qr-screen\").style.display = \"block\";\n  console.log(\"start\");\n\n  navigator.getUserMedia =\n    navigator.getUserMedia ||\n    navigator.webkitGetUserMedia ||\n    navigator.mozGetUserMedia;\n\n  if (navigator.getUserMedia) {\n    navigator.getUserMedia(\n      {\n        audio: false,\n        video: {\n          width: 200,\n          height: 200,\n        },\n      },\n      function (stream) {\n        video = document.querySelector(\"video\");\n        video.srcObject = stream;\n\n        video.onloadedmetadata = function (e) {\n          video.play();\n\n          var barcodeCanvas = document.createElement(\"canvas\");\n          intv = setInterval(() => {\n            barcodeCanvas.width = video.videoWidth;\n            barcodeCanvas.height = video.videoHeight;\n            var barcodeContext = barcodeCanvas.getContext(\"2d\");\n            var imageWidth = Math.max(1, Math.floor(video.videoWidth)),\n              imageHeight = Math.max(1, Math.floor(video.videoHeight));\n\n            barcodeContext.drawImage(video, 0, 0, imageWidth, imageHeight);\n\n            var imageData = barcodeContext.getImageData(\n              0,\n              0,\n              imageWidth,\n              imageHeight\n            );\n            var idd = imageData.data;\n\n            let code = jsQR(idd, imageWidth, imageHeight);\n            console.log(code);\n\n            if (code) {\n              stop_scan();\n              callback(code.data);\n              clearInterval(intv);\n            }\n          }, 1000);\n        };\n      },\n      function (err) {\n        console.log(\"The following error occurred: \" + err.name);\n      }\n    );\n  } else {\n    console.log(\"getUserMedia not supported\");\n  }\n};\n"},"lineCount":null}},"error":null,"hash":"424fc17ea6a0f7c6404492339adf26f4","cacheData":{"env":{}}}